{
    "version": 1,

    "tasks": {
        "clean": [
            "java/api/src/gen/java/org/dressdiscover",
            "java/lib/src/gen/java/org/dressdiscover",
            "java/server/src/gen/java/org/dressdiscover",
            "py/src/dressdiscover/api",
            "ts/src/ts/dressdiscover/api"
        ],
        "generate": [{
                "description": "ElasticSearch mappings",
                "thrift_root_dir": "thrift/src",
                "thrift_include_dirs": ["../thryft-waf/thrift/src"],
                "thrift_files": "thrift/src/**/object_summary.thrift",
                "gen": {
                    "elastic_search_mappings_json": {
                        "out": "java/lib/src/main/resources/elastic_search_templates/object_summary_template.json",
                        "template": "object_summary_*"
                    }
                }
            },
            {
                "description": "api Java",
                "thrift_root_dir": "thrift/src",
                "thrift_include_dirs": ["../thryft-waf/thrift/src"],
                "thrift_files": {
                    "include": "thrift/src/dressdiscover/api/**/*.thrift",
                    "exclude": [
                        "thrift/src/dressdiscover/api/**/worksheet/**/*.thrift",
                        "thrift/src/dressdiscover/api/models/user/user_settings.thrift"
                    ]
                },
                "gen": {
                    "java": {
                        "default_methods": true,
                        "function_overloads": true,
                        "namespace_prefix": "org.",
                        "out": "java/api/src/gen/java"
                    }
                }
            },
            {
                "description": "api services Java",
                "thrift_root_dir": "thrift/src",
                "thrift_include_dirs": ["../thryft-waf/thrift/src"],
                "thrift_files": {
                    "include": "thrift/src/dressdiscover/api/services/**/*_service.thrift",
                    "exclude": "thrift/src/dressdiscover/api/services/worksheet/**/*_service.thrift"
                },
                "gen": {
                    "json_rpc_servlet_java": {
                        "namespace_prefix": "org.",
                        "out": "java/server/src/gen/java"
                    }
                }
            },
            {
                "description": "api worksheet models",
                "thrift_root_dir": "thrift/src",
                "thrift_include_dirs": ["../thryft-waf/thrift/src"],
                "thrift_files": [
                    "thrift/src/dressdiscover/api/models/worksheet/**/*.thrift",
                    "thrift/src/dressdiscover/api/models/user/user.thrift",
                    "thrift/src/dressdiscover/api/models/user/user_identity_provider.thrift",
                    "thrift/src/dressdiscover/api/models/user/user_settings.thrift"
                ],
                "gen": {
                    "ts": "ts/src/ts"
                }
            },
            {
                "description": "api worksheet service exceptions",
                "thrift_root_dir": "thrift/src",
                "thrift_include_dirs": ["../thryft-waf/thrift/src"],
                "thrift_files": [
                    "thrift/src/dressdiscover/api/services/io_exception.thrift",
                    "thrift/src/dressdiscover/api/services/worksheet/**/*_exception.thrift"
                ],
                "gen": {
                    "ts": "ts/src/ts"
                }
            },
            {
                "description": "api worksheet services",
                "thrift_root_dir": "thrift/src",
                "thrift_include_dirs": ["../thryft-waf/thrift/src"],
                "thrift_files": "thrift/src/dressdiscover/api/services/worksheet/**/*_service.thrift",
                "gen": {
                    "json_rpc_client_ts": "ts/src/ts",
                    "logging_service_ts": "ts/src/ts",
                    "ts": "ts/src/ts"
                }
            },
            {
                "description": "lib Java",
                "thrift_root_dir": "thrift/src",
                "thrift_include_dirs": ["../thryft-waf/thrift/src"],
                "thrift_files": {
                    "include": "thrift/src/dressdiscover/lib/**/*.thrift",
                    "exclude": "thrift/src/dressdiscover/lib/properties/*_properties.thrift"
                },
                "gen": {
                    "java": {
                        "default_methods": true,
                        "function_overloads": true,
                        "namespace_prefix": "org.",
                        "out": "java/lib/src/gen/java"
                    }
                }
            },
            {
                "description": "lib .properties Java",
                "thrift_root_dir": "thrift/src",
                "thrift_include_dirs": ["../thryft-waf/thrift/src"],
                "thrift_files": "thrift/src/dressdiscover/lib/properties/*_properties.thrift",
                "gen": {
                    "properties_java": {
                        "out": "java/lib/src/gen/java",
                        "namespace_prefix": "org.",
                        "project_name": "dressdiscover"
                    }
                }
            },
            {
                "description": "lib logging and validating services Java",
                "thrift_root_dir": "thrift/src",
                "thrift_include_dirs": ["../thryft-waf/thrift/src"],
                "thrift_files": {
                    "include": "thrift/src/**/*_service.thrift",
                    "exclude": "thrift/src/dressdiscover/api/services/worksheet/**/*.thrift"
                },
                "gen": {
                    "logging_service_java": {
                        "exception_log_level_default": "error",
                        "namespace_prefix": "org.",
                        "out": "java/lib/src/gen/java"
                    },
                    "validating_service_java": {
                        "namespace_prefix": "org.",
                        "out": "java/lib/src/gen/java"
                    }
                }
            }
        ],
        "lint": [{
            "thrift_root_dir": "thrift/src",
            "thrift_include_dirs": ["../thryft-waf/thrift/src"]
        }],
        "package_info_java": [{
            "description": "package-info.java",
            "java_root_dir": "java/lib/src/main/java",
            "java_dirs": "java/lib/src/main/java/org/dressdiscover/lib/**/"
        }]
    },

    "pythonpath": ["../thryft-waf/thrift/src/thryft"]
}
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("jQuery"),require("_"));else if("function"==typeof define&&define.amd)define(["jQuery","_"],t);else{var i="object"==typeof exports?t(require("jQuery"),require("_")):t(e.jQuery,e._);for(var n in i)("object"==typeof exports?exports:e)[n]=i[n]}}(this,function(e,t){return function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){e.exports=i(1)},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(2),o=i(3),s=i(4),a=i(5),l=i(8),h=i(10),c=i(73);i(74),i(75),i(77),i(78),i(80);var u=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.onStart=function(){this._modalRegion=new c.ModalRegion,this._radio=new l.Radio,this._router=new h.Router,s.history.start({hashChange:!0,pushState:!1})||console.error("didn't route")},Object.defineProperty(t,"instance",{get:function(){return t._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radio",{get:function(){return this._radio},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modalRegion",{get:function(){return this._modalRegion},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"router",{get:function(){return this._router},enumerable:!0,configurable:!0}),t._instance=new t,t}(a.Application);t.Application=u,r(function(){o.extend(s.Model.prototype,s.Validation.mixin),u.instance.start()})},function(t,i){t.exports=e},function(e,i){e.exports=t},function(e,t,i){var n,r;(function(o){!function(s){var a="object"==typeof self&&self.self===self&&self||"object"==typeof o&&o.global===o&&o;n=[i(3),i(2),t],r=function(e,t,i){a.Backbone=s(a,i,e,t)}.apply(t,n),!(void 0!==r&&(e.exports=r))}(function(e,t,i,n){var r=e.Backbone,o=Array.prototype.slice;t.VERSION="1.3.3",t.$=n,t.noConflict=function(){return e.Backbone=r,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s=function(e,t,n){switch(e){case 1:return function(){return i[t](this[n])};case 2:return function(e){return i[t](this[n],e)};case 3:return function(e,r){return i[t](this[n],l(e,this),r)};case 4:return function(e,r,o){return i[t](this[n],l(e,this),r,o)};default:return function(){var e=o.call(arguments);return e.unshift(this[n]),i[t].apply(i,e)}}},a=function(e,t,n){i.each(t,function(t,r){i[r]&&(e.prototype[r]=s(t,r,n))})},l=function(e,t){return i.isFunction(e)?e:i.isObject(e)&&!t._isModel(e)?h(e):i.isString(e)?function(t){return t.get(e)}:e},h=function(e){var t=i.matches(e);return function(e){return t(e.attributes)}},c=t.Events={},u=/\s+/,d=function(e,t,n,r,o){var s,a=0;if(n&&"object"==typeof n){void 0!==r&&"context"in o&&void 0===o.context&&(o.context=r);for(s=i.keys(n);a<s.length;a++)t=d(e,t,s[a],n[s[a]],o)}else if(n&&u.test(n))for(s=n.split(u);a<s.length;a++)t=e(t,s[a],r,o);else t=e(t,n,r,o);return t};c.on=function(e,t,i){return f(this,e,t,i)};var f=function(e,t,i,n,r){if(e._events=d(p,e._events||{},t,i,{context:n,ctx:e,listening:r}),r){var o=e._listeners||(e._listeners={});o[r.id]=r}return e};c.listenTo=function(e,t,n){if(!e)return this;var r=e._listenId||(e._listenId=i.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),s=o[r];if(!s){var a=this._listenId||(this._listenId=i.uniqueId("l"));s=o[r]={obj:e,objId:r,id:a,listeningTo:o,count:0}}return f(e,t,n,this,s),this};var p=function(e,t,i,n){if(i){var r=e[t]||(e[t]=[]),o=n.context,s=n.ctx,a=n.listening;a&&a.count++,r.push({callback:i,context:o,ctx:o||s,listening:a})}return e};c.off=function(e,t,i){return this._events?(this._events=d(g,this._events,e,t,{context:i,listeners:this._listeners}),this):this},c.stopListening=function(e,t,n){var r=this._listeningTo;if(!r)return this;for(var o=e?[e._listenId]:i.keys(r),s=0;s<o.length;s++){var a=r[o[s]];if(!a)break;a.obj.off(t,n,this)}return this};var g=function(e,t,n,r){if(e){var o,s=0,a=r.context,l=r.listeners;if(t||n||a){for(var h=t?[t]:i.keys(e);s<h.length;s++){t=h[s];var c=e[t];if(!c)break;for(var u=[],d=0;d<c.length;d++){var f=c[d];n&&n!==f.callback&&n!==f.callback._callback||a&&a!==f.context?u.push(f):(o=f.listening,o&&0===--o.count&&(delete l[o.id],delete o.listeningTo[o.objId]))}u.length?e[t]=u:delete e[t]}return e}for(var p=i.keys(l);s<p.length;s++)o=l[p[s]],delete l[o.id],delete o.listeningTo[o.objId]}};c.once=function(e,t,n){var r=d(v,{},e,t,i.bind(this.off,this));return"string"==typeof e&&null==n&&(t=void 0),this.on(r,t,n)},c.listenToOnce=function(e,t,n){var r=d(v,{},t,n,i.bind(this.stopListening,this,e));return this.listenTo(e,r)};var v=function(e,t,n,r){if(n){var o=e[t]=i.once(function(){r(t,o),n.apply(this,arguments)});o._callback=n}return e};c.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),i=Array(t),n=0;n<t;n++)i[n]=arguments[n+1];return d(m,this._events,e,void 0,i),this};var m=function(e,t,i,n){if(e){var r=e[t],o=e.all;r&&o&&(o=o.slice()),r&&y(r,n),o&&y(o,[t].concat(n))}return e},y=function(e,t){var i,n=-1,r=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++n<r;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<r;)(i=e[n]).callback.call(i.ctx,o);return;case 2:for(;++n<r;)(i=e[n]).callback.call(i.ctx,o,s);return;case 3:for(;++n<r;)(i=e[n]).callback.call(i.ctx,o,s,a);return;default:for(;++n<r;)(i=e[n]).callback.apply(i.ctx,t);return}};c.bind=c.on,c.unbind=c.off,i.extend(t,c);var b=t.Model=function(e,t){var n=e||{};t||(t={}),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{});var r=i.result(this,"defaults");n=i.defaults(i.extend({},r,n),r),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};i.extend(b.prototype,c,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return i.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return i.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!i.iteratee(e,this)(this.attributes)},set:function(e,t,n){if(null==e)return this;var r;if("object"==typeof e?(r=e,n=t):(r={})[e]=t,n||(n={}),!this._validate(r,n))return!1;var o=n.unset,s=n.silent,a=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=i.clone(this.attributes),this.changed={});var h=this.attributes,c=this.changed,u=this._previousAttributes;for(var d in r)t=r[d],i.isEqual(h[d],t)||a.push(d),i.isEqual(u[d],t)?delete c[d]:c[d]=t,o?delete h[d]:h[d]=t;if(this.idAttribute in r&&(this.id=this.get(this.idAttribute)),!s){a.length&&(this._pending=n);for(var f=0;f<a.length;f++)this.trigger("change:"+a[f],this,h[a[f]],n)}if(l)return this;if(!s)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,i.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,i.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!i.isEmpty(this.changed):i.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&i.clone(this.changed);var t=this._changing?this._previousAttributes:this.attributes,n={};for(var r in e){var o=e[r];i.isEqual(t[r],o)||(n[r]=o)}return!!i.size(n)&&n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(e){e=i.extend({parse:!0},e);var t=this,n=e.success;return e.success=function(i){var r=e.parse?t.parse(i,e):i;return!!t.set(r,e)&&(n&&n.call(e.context,t,i,e),void t.trigger("sync",t,i,e))},z(this,e),this.sync("read",this,e)},save:function(e,t,n){var r;null==e||"object"==typeof e?(r=e,n=t):(r={})[e]=t,n=i.extend({validate:!0,parse:!0},n);var o=n.wait;if(r&&!o){if(!this.set(r,n))return!1}else if(!this._validate(r,n))return!1;var s=this,a=n.success,l=this.attributes;n.success=function(e){s.attributes=l;var t=n.parse?s.parse(e,n):e;return o&&(t=i.extend({},r,t)),!(t&&!s.set(t,n))&&(a&&a.call(n.context,s,e,n),void s.trigger("sync",s,e,n))},z(this,n),r&&o&&(this.attributes=i.extend({},l,r));var h=this.isNew()?"create":n.patch?"patch":"update";"patch"!==h||n.attrs||(n.attrs=r);var c=this.sync(h,this,n);return this.attributes=l,c},destroy:function(e){e=e?i.clone(e):{};var t=this,n=e.success,r=e.wait,o=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(i){r&&o(),n&&n.call(e.context,t,i,e),t.isNew()||t.trigger("sync",t,i,e)};var s=!1;return this.isNew()?i.defer(e.success):(z(this,e),s=this.sync("delete",this,e)),r||o(),s},url:function(){var e=i.result(this,"urlRoot")||i.result(this.collection,"url")||j();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},i.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=i.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return!n||(this.trigger("invalid",this,n,i.extend(t,{validationError:n})),!1)}});var _={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};a(b,_,"attributes");var w=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,i.extend({silent:!0},t))},x={add:!0,remove:!0,merge:!0},S={add:!0,remove:!1},k=function(e,t,i){i=Math.min(Math.max(i,0),e.length);var n,r=Array(e.length-i),o=t.length;for(n=0;n<r.length;n++)r[n]=e[n+i];for(n=0;n<o;n++)e[n+i]=t[n];for(n=0;n<r.length;n++)e[n+o+i]=r[n]};i.extend(w.prototype,c,{model:b,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,i.extend({merge:!1},t,S))},remove:function(e,t){t=i.extend({},t);var n=!i.isArray(e);e=n?[e]:e.slice();var r=this._removeModels(e,t);return!t.silent&&r.length&&(t.changes={added:[],merged:[],removed:r},this.trigger("update",this,t)),n?r[0]:r},set:function(e,t){if(null!=e){t=i.extend({},x,t),t.parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var n=!i.isArray(e);e=n?[e]:e.slice();var r=t.at;null!=r&&(r=+r),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);var o,s,a=[],l=[],h=[],c=[],u={},d=t.add,f=t.merge,p=t.remove,g=!1,v=this.comparator&&null==r&&t.sort!==!1,m=i.isString(this.comparator)?this.comparator:null;for(s=0;s<e.length;s++){o=e[s];var y=this.get(o);if(y){if(f&&o!==y){var b=this._isModel(o)?o.attributes:o;t.parse&&(b=y.parse(b,t)),y.set(b,t),h.push(y),v&&!g&&(g=y.hasChanged(m))}u[y.cid]||(u[y.cid]=!0,a.push(y)),e[s]=y}else d&&(o=e[s]=this._prepareModel(o,t),o&&(l.push(o),this._addReference(o,t),u[o.cid]=!0,a.push(o)))}if(p){for(s=0;s<this.length;s++)o=this.models[s],u[o.cid]||c.push(o);c.length&&this._removeModels(c,t)}var _=!1,w=!v&&d&&p;if(a.length&&w?(_=this.length!==a.length||i.some(this.models,function(e,t){return e!==a[t]}),this.models.length=0,k(this.models,a,0),this.length=this.models.length):l.length&&(v&&(g=!0),k(this.models,l,null==r?this.length:r),this.length=this.models.length),g&&this.sort({silent:!0}),!t.silent){for(s=0;s<l.length;s++)null!=r&&(t.index=r+s),o=l[s],o.trigger("add",o,this,t);(g||_)&&this.trigger("sort",this,t),(l.length||c.length||h.length)&&(t.changes={added:l,removed:c,merged:h},this.trigger("update",this,t))}return n?e[0]:e}},reset:function(e,t){t=t?i.clone(t):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,i.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,i.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,i.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return o.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(e.attributes||e)]||e.cid&&this._byId[e.cid]},has:function(e){return null!=this.get(e)},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var n=t.length;return i.isFunction(t)&&(t=i.bind(t,this)),1===n||i.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){e=i.extend({parse:!0},e);var t=e.success,n=this;return e.success=function(i){var r=e.reset?"reset":"set";n[r](i,e),t&&t.call(e.context,n,i,e),n.trigger("sync",n,i,e)},z(this,e),this.sync("read",this,e)},create:function(e,t){t=t?i.clone(t):{};var n=t.wait;if(e=this._prepareModel(e,t),!e)return!1;n||this.add(e,t);var r=this,o=t.success;return t.success=function(e,t,i){n&&r.add(e,i),o&&o.call(i.context,e,t,i)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?i.clone(t):{},t.collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_removeModels:function(e,t){for(var i=[],n=0;n<e.length;n++){var r=this.get(e[n]);if(r){var o=this.indexOf(r);this.models.splice(o,1),this.length--,delete this._byId[r.cid];var s=this.modelId(r.attributes);null!=s&&delete this._byId[s],t.silent||(t.index=o,r.trigger("remove",r,this,t)),i.push(r),this._removeReference(r,t)}}return i},_isModel:function(e){return e instanceof b},_addReference:function(e,t){this._byId[e.cid]=e;var i=this.modelId(e.attributes);null!=i&&(this._byId[i]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var i=this.modelId(e.attributes);null!=i&&delete this._byId[i],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){if(t){if(("add"===e||"remove"===e)&&i!==this)return;if("destroy"===e&&this.remove(t,n),"change"===e){var r=this.modelId(t.previousAttributes()),o=this.modelId(t.attributes);r!==o&&(null!=r&&delete this._byId[r],null!=o&&(this._byId[o]=t))}}this.trigger.apply(this,arguments)}});var C={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};a(w,C,"models");var F=t.View=function(e){this.cid=i.uniqueId("view"),i.extend(this,i.pick(e,O)),this._ensureElement(),this.initialize.apply(this,arguments)},E=/^(\S+)\s*(.*)$/,O=["model","collection","el","id","attributes","className","tagName","events"];i.extend(F.prototype,c,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=i.result(this,"events")),!e)return this;this.undelegateEvents();for(var t in e){var n=e[t];if(i.isFunction(n)||(n=this[n]),n){var r=t.match(E);this.delegate(r[1],r[2],i.bind(n,this))}}return this},delegate:function(e,t,i){return this.$el.on(e+".delegateEvents"+this.cid,t,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,i){return this.$el.off(e+".delegateEvents"+this.cid,t,i),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var e=i.extend({},i.result(this,"attributes"));this.id&&(e.id=i.result(this,"id")),this.className&&(e.class=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,n,r){var o=N[e];i.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:o,dataType:"json"};if(r.url||(s.url=i.result(n,"url")||j()),null!=r.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(r.attrs||n.toJSON(r))),r.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",r.emulateJSON&&(s.data._method=o);var a=r.beforeSend;r.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",o),a)return a.apply(this,arguments)}}"GET"===s.type||r.emulateJSON||(s.processData=!1);var l=r.error;r.error=function(e,t,i){r.textStatus=t,r.errorThrown=i,l&&l.call(r.context,e,t,i)};var h=r.xhr=t.ajax(i.extend(s,r));return n.trigger("request",n,h,r),h};var N={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var $=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},V=/\((.*?)\)/g,I=/(\(\?)?:\w+/g,M=/\*\w+/g,T=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend($.prototype,c,{initialize:function(){},route:function(e,n,r){i.isRegExp(e)||(e=this._routeToRegExp(e)),i.isFunction(n)&&(r=n,n=""),r||(r=this[n]);var o=this;return t.history.route(e,function(i){var s=o._extractParameters(e,i);o.execute(r,s,n)!==!1&&(o.trigger.apply(o,["route:"+n].concat(s)),o.trigger("route",n,s),t.history.trigger("route",o,n,s))}),this},execute:function(e,t,i){e&&e.apply(this,t)},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var e,t=i.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(T,"\\$&").replace(V,"(?:$1)?").replace(I,function(e,t){return t?e:"([^/?]+)"}).replace(M,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return i.map(n,function(e,t){return t===n.length-1?e||null:e?decodeURIComponent(e):null})}});var A=t.History=function(){this.handlers=[],this.checkUrl=i.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},D=/^[#\/]|\s+$/g,R=/^\/+|\/+$/g,W=/#.*$/;A.started=!1,i.extend(A.prototype,c,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.getSearch()},matchRoot:function(){var e=this.decodeFragment(this.location.pathname),t=e.slice(0,this.root.length-1)+"/";return t===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(D,"")},start:function(e){if(A.started)throw new Error("Backbone.history has already been started");if(A.started=!0,this.options=i.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(R,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,r=n.insertBefore(this.iframe,n.firstChild).contentWindow;r.document.open(),r.document.close(),r.location.hash="#"+this.fragment}var o=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),A.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t!==this.fragment&&(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),i.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(e,t){if(!A.started)return!1;t&&t!==!0||(t={trigger:!!t}),e=this.getFragment(e||"");var i=this.root;""!==e&&"?"!==e.charAt(0)||(i=i.slice(0,-1)||"/");var n=i+e;if(e=this.decodeFragment(e.replace(W,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var r=this.iframe.contentWindow;t.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,i){if(i){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),t.history=new A;var P=function(e,t){var n,r=this;return n=e&&i.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},i.extend(n,r,t),n.prototype=i.create(r.prototype,e),n.prototype.constructor=n,n.__super__=r.prototype,n};b.extend=w.extend=$.extend=F.extend=A.extend=P;var j=function(){throw new Error('A "url" property or function must be specified')},z=function(e,t){var i=t.error;t.error=function(n){i&&i.call(t.context,e,n,t),e.trigger("error",e,n,t)}};return t})}).call(t,function(){return this}())},function(e,t,i){var n,r;!function(o,s){n=[i(4),i(3),i(6),i(7)],r=function(e,t){return o.Marionette=o.Mn=s(o,e,t)}.apply(t,n),!(void 0!==r&&(e.exports=r))}(this,function(e,t,i){"use strict";var n=e.Marionette,r=e.Mn,o=t.Marionette={};o.VERSION="2.4.7",o.noConflict=function(){return e.Marionette=n,e.Mn=r,this},o.Deferred=t.$.Deferred,o.FEATURES={},o.isEnabled=function(e){return!!o.FEATURES[e]},o.extend=t.Model.extend,o.isNodeAttached=function(e){return t.$.contains(document.documentElement,e)},o.mergeOptions=function(e,t){e&&i.extend(this,i.pick(e,t))},o.getOption=function(e,t){if(e&&t)return e.options&&void 0!==e.options[t]?e.options[t]:e[t]},o.proxyGetOption=function(e){return o.getOption(this,e)},o._getValue=function(e,t,n){return i.isFunction(e)&&(e=n?e.apply(t,n):e.call(t)),e},o.normalizeMethods=function(e){return i.reduce(e,function(e,t,n){return i.isFunction(t)||(t=this[t]),t&&(e[n]=t),e},{},this)},o.normalizeUIString=function(e,t){return e.replace(/@ui\.[a-zA-Z-_$0-9]*/g,function(e){return t[e.slice(4)]})},o.normalizeUIKeys=function(e,t){return i.reduce(e,function(e,i,n){var r=o.normalizeUIString(n,t);return e[r]=i,e},{})},o.normalizeUIValues=function(e,t,n){return i.each(e,function(r,s){i.isString(r)?e[s]=o.normalizeUIString(r,t):i.isObject(r)&&i.isArray(n)&&(i.extend(r,o.normalizeUIValues(i.pick(r,n),t)),i.each(n,function(e){var n=r[e];i.isString(n)&&(r[e]=o.normalizeUIString(n,t))}))}),e},o.actAsCollection=function(e,t){var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];i.each(n,function(n){e[n]=function(){var e=i.values(i.result(this,t)),r=[e].concat(i.toArray(arguments));return i[n].apply(i,r)}})};var s=o.deprecate=function(e,t){i.isObject(e)&&(e=e.prev+" is going to be removed in the future. Please use "+e.next+" instead."+(e.url?" See: "+e.url:"")),void 0!==t&&t||s._cache[e]||(s._warn("Deprecation warning: "+e),s._cache[e]=!0)};s._console="undefined"!=typeof console?console:{},s._warn=function(){var e=s._console.warn||s._console.log||function(){};return e.apply(s._console,arguments)},s._cache={},o._triggerMethod=function(){function e(e,t,i){return i.toUpperCase()}var t=/(^|:)(\w)/gi;return function(n,r,o){var s=arguments.length<3;s&&(o=r,r=o[0]);var a,l="on"+r.replace(t,e),h=n[l];return i.isFunction(h)&&(a=h.apply(n,s?i.rest(o):o)),i.isFunction(n.trigger)&&(s+o.length>1?n.trigger.apply(n,s?o:[r].concat(i.drop(o,0))):n.trigger(r)),a}}(),o.triggerMethod=function(e){return o._triggerMethod(this,arguments)},o.triggerMethodOn=function(e){var t=i.isFunction(e.triggerMethod)?e.triggerMethod:o.triggerMethod;return t.apply(e,i.rest(arguments))},o.MonitorDOMRefresh=function(e){function t(){e._isShown=!0,n()}function i(){e._isRendered=!0,n()}function n(){e._isShown&&e._isRendered&&o.isNodeAttached(e.el)&&o.triggerMethodOn(e,"dom:refresh",e)}e._isDomRefreshMonitored||(e._isDomRefreshMonitored=!0,e.on({show:t,render:i}))},function(e){function t(t,n,r,o){var s=o.split(/\s+/);i.each(s,function(i){var o=t[i];if(!o)throw new e.Error('Method "'+i+'" was configured as an event handler, but does not exist.');t.listenTo(n,r,o)})}function n(e,t,i,n){e.listenTo(t,i,n)}function r(e,t,n,r){var o=r.split(/\s+/);i.each(o,function(i){var r=e[i];e.stopListening(t,n,r)})}function o(e,t,i,n){e.stopListening(t,i,n)}function s(t,n,r,o,s){if(n&&r){if(!i.isObject(r))throw new e.Error({message:"Bindings must be an object or function.",url:"marionette.functions.html#marionettebindentityevents"});r=e._getValue(r,t),i.each(r,function(e,r){i.isFunction(e)?o(t,n,r,e):s(t,n,r,e)})}}e.bindEntityEvents=function(e,i,r){s(e,i,r,n,t)},e.unbindEntityEvents=function(e,t,i){s(e,t,i,o,r)},e.proxyBindEntityEvents=function(t,i){return e.bindEntityEvents(this,t,i)},e.proxyUnbindEntityEvents=function(t,i){return e.unbindEntityEvents(this,t,i)}}(o);var a=["description","fileName","lineNumber","name","message","number"];return o.Error=o.extend.call(Error,{urlRoot:"http://marionettejs.com/docs/v"+o.VERSION+"/",constructor:function(e,t){i.isObject(e)?(t=e,e=t.message):t||(t={});var n=Error.call(this,e);i.extend(this,i.pick(n,a),i.pick(t,a)),this.captureStackTrace(),t.url&&(this.url=this.urlRoot+t.url)},captureStackTrace:function(){Error.captureStackTrace&&Error.captureStackTrace(this,o.Error)},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}}),o.Error.extend=o.extend,o.Callbacks=function(){this._deferred=o.Deferred(),this._callbacks=[]},i.extend(o.Callbacks.prototype,{add:function(e,t){var n=i.result(this._deferred,"promise");this._callbacks.push({cb:e,ctx:t}),n.then(function(i){t&&(i.context=t),e.call(i.context,i.options)})},run:function(e,t){this._deferred.resolve({options:e,context:t})},reset:function(){var e=this._callbacks;this._deferred=o.Deferred(),this._callbacks=[],i.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),o.Controller=function(e){this.options=e||{},i.isFunction(this.initialize)&&this.initialize(this.options)},o.Controller.extend=o.extend,i.extend(o.Controller.prototype,t.Events,{destroy:function(){return o._triggerMethod(this,"before:destroy",arguments),o._triggerMethod(this,"destroy",arguments),this.stopListening(),this.off(),this},triggerMethod:o.triggerMethod,mergeOptions:o.mergeOptions,getOption:o.proxyGetOption}),o.Object=function(e){this.options=i.extend({},i.result(this,"options"),e),this.initialize.apply(this,arguments)},o.Object.extend=o.extend,i.extend(o.Object.prototype,t.Events,{initialize:function(){},destroy:function(e){return e=e||{},this.triggerMethod("before:destroy",e),this.triggerMethod("destroy",e),this.stopListening(),this},triggerMethod:o.triggerMethod,mergeOptions:o.mergeOptions,getOption:o.proxyGetOption,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),o.Region=o.Object.extend({constructor:function(e){if(this.options=e||{},this.el=this.getOption("el"),this.el=this.el instanceof t.$?this.el[0]:this.el,!this.el)throw new o.Error({name:"NoElError",message:'An "el" must be specified for a region.'});this.$el=this.getEl(this.el),o.Object.call(this,e)},show:function(e,t){if(this._ensureElement()){this._ensureViewIsIntact(e),o.MonitorDOMRefresh(e);var n=t||{},r=e!==this.currentView,s=!!n.preventDestroy,a=!!n.forceShow,l=!!this.currentView,h=r&&!s,c=r||a;if(l&&this.triggerMethod("before:swapOut",this.currentView,this,t),this.currentView&&r&&delete this.currentView._parent,h?this.empty():l&&c&&this.currentView.off("destroy",this.empty,this),c){e.once("destroy",this.empty,this),e._parent=this,this._renderView(e),l&&this.triggerMethod("before:swap",e,this,t),this.triggerMethod("before:show",e,this,t),o.triggerMethodOn(e,"before:show",e,this,t),l&&this.triggerMethod("swapOut",this.currentView,this,t);var u=o.isNodeAttached(this.el),d=[],f=i.extend({triggerBeforeAttach:this.triggerBeforeAttach,triggerAttach:this.triggerAttach},n);return u&&f.triggerBeforeAttach&&(d=this._displayedViews(e),this._triggerAttach(d,"before:")),this.attachHtml(e),this.currentView=e,u&&f.triggerAttach&&(d=this._displayedViews(e),this._triggerAttach(d)),l&&this.triggerMethod("swap",e,this,t),this.triggerMethod("show",e,this,t),o.triggerMethodOn(e,"show",e,this,t),this}return this}},triggerBeforeAttach:!0,triggerAttach:!0,_triggerAttach:function(e,t){var n=(t||"")+"attach";i.each(e,function(e){o.triggerMethodOn(e,n,e,this)},this)},_displayedViews:function(e){return i.union([e],i.result(e,"_getNestedViews")||[])},_renderView:function(e){e.supportsRenderLifecycle||o.triggerMethodOn(e,"before:render",e),e.render(),e.supportsRenderLifecycle||o.triggerMethodOn(e,"render",e)},_ensureElement:function(){if(i.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]),!this.$el||0===this.$el.length){if(this.getOption("allowMissingEl"))return!1;throw new o.Error('An "el" '+this.$el.selector+" must exist in DOM");
}return!0},_ensureViewIsIntact:function(e){if(!e)throw new o.Error({name:"ViewNotValid",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show."});if(e.isDestroyed)throw new o.Error({name:"ViewDestroyedError",message:'View (cid: "'+e.cid+'") has already been destroyed and cannot be used.'})},getEl:function(e){return t.$(e,o._getValue(this.options.parentEl,this))},attachHtml:function(e){this.$el.contents().detach(),this.el.appendChild(e.el)},empty:function(e){var t=this.currentView,i=e||{},n=!!i.preventDestroy;return t?(t.off("destroy",this.empty,this),this.triggerMethod("before:empty",t),n||this._destroyView(),this.triggerMethod("empty",t),delete this.currentView,n&&this.$el.contents().detach(),this):this},_destroyView:function(){var e=this.currentView;e.isDestroyed||(e.supportsDestroyLifecycle||o.triggerMethodOn(e,"before:destroy",e),e.destroy?e.destroy():(e.remove(),e.isDestroyed=!0),e.supportsDestroyLifecycle||o.triggerMethodOn(e,"destroy",e))},attachView:function(e){return this.currentView&&delete this.currentView._parent,e._parent=this,this.currentView=e,this},hasView:function(){return!!this.currentView},reset:function(){return this.empty(),this.$el&&(this.el=this.$el.selector),delete this.$el,this}},{buildRegion:function(e,t){if(i.isString(e))return this._buildRegionFromSelector(e,t);if(e.selector||e.el||e.regionClass)return this._buildRegionFromObject(e,t);if(i.isFunction(e))return this._buildRegionFromRegionClass(e);throw new o.Error({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"})},_buildRegionFromSelector:function(e,t){return new t({el:e})},_buildRegionFromObject:function(e,t){var n=e.regionClass||t,r=i.omit(e,"selector","regionClass");return e.selector&&!r.el&&(r.el=e.selector),new n(r)},_buildRegionFromRegionClass:function(e){return new e}}),o.RegionManager=o.Controller.extend({constructor:function(e){this._regions={},this.length=0,o.Controller.call(this,e),this.addRegions(this.getOption("regions"))},addRegions:function(e,t){return e=o._getValue(e,this,arguments),i.reduce(e,function(e,n,r){return i.isString(n)&&(n={selector:n}),n.selector&&(n=i.defaults({},n,t)),e[r]=this.addRegion(r,n),e},{},this)},addRegion:function(e,t){var i;return i=t instanceof o.Region?t:o.Region.buildRegion(t,o.Region),this.triggerMethod("before:add:region",e,i),i._parent=this,this._store(e,i),this.triggerMethod("add:region",e,i),i},get:function(e){return this._regions[e]},getRegions:function(){return i.clone(this._regions)},removeRegion:function(e){var t=this._regions[e];return this._remove(e,t),t},removeRegions:function(){var e=this.getRegions();return i.each(this._regions,function(e,t){this._remove(t,e)},this),e},emptyRegions:function(){var e=this.getRegions();return i.invoke(e,"empty"),e},destroy:function(){return this.removeRegions(),o.Controller.prototype.destroy.apply(this,arguments)},_store:function(e,t){this._regions[e]||this.length++,this._regions[e]=t},_remove:function(e,t){this.triggerMethod("before:remove:region",e,t),t.empty(),t.stopListening(),delete t._parent,delete this._regions[e],this.length--,this.triggerMethod("remove:region",e,t)}}),o.actAsCollection(o.RegionManager.prototype,"_regions"),o.TemplateCache=function(e){this.templateId=e},i.extend(o.TemplateCache,{templateCaches:{},get:function(e,t){var i=this.templateCaches[e];return i||(i=new o.TemplateCache(e),this.templateCaches[e]=i),i.load(t)},clear:function(){var e,t=i.toArray(arguments),n=t.length;if(n>0)for(e=0;e<n;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),i.extend(o.TemplateCache.prototype,{load:function(e){if(this.compiledTemplate)return this.compiledTemplate;var t=this.loadTemplate(this.templateId,e);return this.compiledTemplate=this.compileTemplate(t,e),this.compiledTemplate},loadTemplate:function(e,i){var n=t.$(e);if(!n.length)throw new o.Error({name:"NoTemplateError",message:'Could not find template: "'+e+'"'});return n.html()},compileTemplate:function(e,t){return i.template(e,t)}}),o.Renderer={render:function(e,t){if(!e)throw new o.Error({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});var n=i.isFunction(e)?e:o.TemplateCache.get(e);return n(t)}},o.View=t.View.extend({isDestroyed:!1,supportsRenderLifecycle:!0,supportsDestroyLifecycle:!0,constructor:function(e){this.render=i.bind(this.render,this),e=o._getValue(e,this),this.options=i.extend({},i.result(this,"options"),e),this._behaviors=o.Behaviors(this),t.View.call(this,this.options),o.MonitorDOMRefresh(this)},getTemplate:function(){return this.getOption("template")},serializeModel:function(e){return e.toJSON.apply(e,i.rest(arguments))},mixinTemplateHelpers:function(e){e=e||{};var t=this.getOption("templateHelpers");return t=o._getValue(t,this),i.extend(e,t)},normalizeUIKeys:function(e){var t=i.result(this,"_uiBindings");return o.normalizeUIKeys(e,t||i.result(this,"ui"))},normalizeUIValues:function(e,t){var n=i.result(this,"ui"),r=i.result(this,"_uiBindings");return o.normalizeUIValues(e,r||n,t)},configureTriggers:function(){if(this.triggers){var e=this.normalizeUIKeys(i.result(this,"triggers"));return i.reduce(e,function(e,t,i){return e[i]=this._buildViewTrigger(t),e},{},this)}},delegateEvents:function(e){return this._delegateDOMEvents(e),this.bindEntityEvents(this.model,this.getOption("modelEvents")),this.bindEntityEvents(this.collection,this.getOption("collectionEvents")),i.each(this._behaviors,function(e){e.bindEntityEvents(this.model,e.getOption("modelEvents")),e.bindEntityEvents(this.collection,e.getOption("collectionEvents"))},this),this},_delegateDOMEvents:function(e){var n=o._getValue(e||this.events,this);n=this.normalizeUIKeys(n),i.isUndefined(e)&&(this.events=n);var r={},s=i.result(this,"behaviorEvents")||{},a=this.configureTriggers(),l=i.result(this,"behaviorTriggers")||{};i.extend(r,s,n,a,l),t.View.prototype.delegateEvents.call(this,r)},undelegateEvents:function(){return t.View.prototype.undelegateEvents.apply(this,arguments),this.unbindEntityEvents(this.model,this.getOption("modelEvents")),this.unbindEntityEvents(this.collection,this.getOption("collectionEvents")),i.each(this._behaviors,function(e){e.unbindEntityEvents(this.model,e.getOption("modelEvents")),e.unbindEntityEvents(this.collection,e.getOption("collectionEvents"))},this),this},_ensureViewIsIntact:function(){if(this.isDestroyed)throw new o.Error({name:"ViewDestroyedError",message:'View (cid: "'+this.cid+'") has already been destroyed and cannot be used.'})},destroy:function(){if(this.isDestroyed)return this;var e=i.toArray(arguments);return this.triggerMethod.apply(this,["before:destroy"].concat(e)),this.isDestroyed=!0,this.triggerMethod.apply(this,["destroy"].concat(e)),this.unbindUIElements(),this.isRendered=!1,this.remove(),i.invoke(this._behaviors,"destroy",e),this},bindUIElements:function(){this._bindUIElements(),i.invoke(this._behaviors,this._bindUIElements)},_bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=i.result(this,"_uiBindings");this.ui={},i.each(e,function(e,t){this.ui[t]=this.$(e)},this)}},unbindUIElements:function(){this._unbindUIElements(),i.invoke(this._behaviors,this._unbindUIElements)},_unbindUIElements:function(){this.ui&&this._uiBindings&&(i.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)},_buildViewTrigger:function(e){var t=i.defaults({},e,{preventDefault:!0,stopPropagation:!0}),n=i.isObject(e)?t.event:e;return function(e){e&&(e.preventDefault&&t.preventDefault&&e.preventDefault(),e.stopPropagation&&t.stopPropagation&&e.stopPropagation());var i={view:this,model:this.model,collection:this.collection};this.triggerMethod(n,i)}},setElement:function(){var e=t.View.prototype.setElement.apply(this,arguments);return i.invoke(this._behaviors,"proxyViewProperties",this),e},triggerMethod:function(){var e=o._triggerMethod(this,arguments);return this._triggerEventOnBehaviors(arguments),this._triggerEventOnParentLayout(arguments[0],i.rest(arguments)),e},_triggerEventOnBehaviors:function(e){for(var t=o._triggerMethod,i=this._behaviors,n=0,r=i&&i.length;n<r;n++)t(i[n],e)},_triggerEventOnParentLayout:function(e,t){var n=this._parentLayoutView();if(n){var r=o.getOption(n,"childViewEventPrefix"),s=r+":"+e,a=[this].concat(t);o._triggerMethod(n,s,a);var l=o.getOption(n,"childEvents");l=o._getValue(l,n);var h=n.normalizeMethods(l);h&&i.isFunction(h[e])&&h[e].apply(n,a)}},_getImmediateChildren:function(){return[]},_getNestedViews:function(){var e=this._getImmediateChildren();return e.length?i.reduce(e,function(e,t){return t._getNestedViews?e.concat(t._getNestedViews()):e},e):e},_parentLayoutView:function(){for(var e=this._parent;e;){if(e instanceof o.LayoutView)return e;e=e._parent}},normalizeMethods:o.normalizeMethods,mergeOptions:o.mergeOptions,getOption:o.proxyGetOption,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),o.ItemView=o.View.extend({constructor:function(){o.View.apply(this,arguments)},serializeData:function(){if(!this.model&&!this.collection)return{};var e=[this.model||this.collection];return arguments.length&&e.push.apply(e,arguments),this.model?this.serializeModel.apply(this,e):{items:this.serializeCollection.apply(this,e)}},serializeCollection:function(e){return e.toJSON.apply(e,i.rest(arguments))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderTemplate(),this.isRendered=!0,this.bindUIElements(),this.triggerMethod("render",this),this},_renderTemplate:function(){var e=this.getTemplate();if(e!==!1){if(!e)throw new o.Error({name:"UndefinedTemplateError",message:"Cannot render the template since it is null or undefined."});var t=this.mixinTemplateHelpers(this.serializeData()),i=o.Renderer.render(e,t,this);return this.attachElContent(i),this}},attachElContent:function(e){return this.$el.html(e),this}}),o.CollectionView=o.View.extend({childViewEventPrefix:"childview",sort:!0,constructor:function(e){this.once("render",this._initialEvents),this._initChildViewStorage(),o.View.apply(this,arguments),this.on({"before:show":this._onBeforeShowCalled,show:this._onShowCalled,"before:attach":this._onBeforeAttachCalled,attach:this._onAttachCalled}),this.initRenderBuffer()},initRenderBuffer:function(){this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){var e,t=this._isShown&&o.isNodeAttached(this.el);this.isBuffering=!1,this._isShown&&this._triggerMethodMany(this._bufferedChildren,this,"before:show"),t&&this._triggerBeforeAttach&&(e=this._getNestedViews(),this._triggerMethodMany(e,this,"before:attach")),this.attachBuffer(this,this._createBuffer()),t&&this._triggerAttach&&(e=this._getNestedViews(),this._triggerMethodMany(e,this,"attach")),this._isShown&&this._triggerMethodMany(this._bufferedChildren,this,"show"),this.initRenderBuffer()},_triggerMethodMany:function(e,t,n){var r=i.drop(arguments,3);i.each(e,function(e){o.triggerMethodOn.apply(e,[e,n,e,t].concat(r))})},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.getOption("sort")&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(e,t,n){var r=void 0!==n.at&&(n.index||t.indexOf(e));if((this.getOption("filter")||r===!1)&&(r=i.indexOf(this._filteredSortedModels(r),e)),this._shouldAddChild(e,r)){this.destroyEmptyView();var o=this.getChildView(e);this.addChild(e,o,r)}},_onCollectionRemove:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},_onBeforeShowCalled:function(){this._triggerBeforeAttach=this._triggerAttach=!1,this.children.each(function(e){o.triggerMethodOn(e,"before:show",e)})},_onShowCalled:function(){this.children.each(function(e){o.triggerMethodOn(e,"show",e)})},_onBeforeAttachCalled:function(){this._triggerBeforeAttach=!0},_onAttachCalled:function(){this._triggerAttach=!0},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderChildren(),this.isRendered=!0,this.triggerMethod("render",this),this},reorder:function(){var e=this.children,t=this._filteredSortedModels();if(!t.length&&this._showingEmptyView)return this;var n=i.some(t,function(t){return!e.findByModel(t)});if(n)this.render();else{var r=i.map(t,function(t,i){var n=e.findByModel(t);return n._index=i,n.el}),o=e.filter(function(e){return!i.contains(r,e.el)});this.triggerMethod("before:reorder"),this._appendReorderedChildren(r),i.each(o,this.removeChildView,this),this.checkEmpty(),this.triggerMethod("reorder")}},resortView:function(){o.getOption(this,"reorderOnSort")?this.reorder():this.render()},_sortViews:function(){var e=this._filteredSortedModels(),t=i.find(e,function(e,t){var i=this.children.findByModel(e);return!i||i._index!==t},this);t&&this.resortView()},_emptyViewIndex:-1,_appendReorderedChildren:function(e){this.$el.append(e)},_renderChildren:function(){this.destroyEmptyView(),this.destroyChildren({checkEmpty:!1}),this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this),this.children.isEmpty()&&this.getOption("filter")&&this.showEmptyView())},showCollection:function(){var e,t=this._filteredSortedModels();i.each(t,function(t,i){e=this.getChildView(t),this.addChild(t,e,i)},this)},_filteredSortedModels:function(e){var t=this.getViewComparator(),n=this.collection.models;if(e=Math.min(Math.max(e,0),n.length-1),t){var r;e&&(r=n[e],n=n.slice(0,e).concat(n.slice(e+1))),n=this._sortModelsBy(n,t),r&&n.splice(e,0,r)}return this.getOption("filter")&&(n=i.filter(n,function(e,t){return this._shouldAddChild(e,t)},this)),n},_sortModelsBy:function(e,t){return"string"==typeof t?i.sortBy(e,function(e){return e.get(t)},this):1===t.length?i.sortBy(e,t,this):e.sort(i.bind(t,this))},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this.triggerMethod("before:render:empty"),this._showingEmptyView=!0;var i=new t.Model;this.addEmptyView(i,e),this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.triggerMethod("before:remove:empty"),this.destroyChildren(),delete this._showingEmptyView,this.triggerMethod("remove:empty"))},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(e,t){var n,r=this._isShown&&!this.isBuffering&&o.isNodeAttached(this.el),s=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");i.isFunction(s)&&(s=s.call(this,e,this._emptyViewIndex));var a=this.buildChildView(e,t,s);a._parent=this,this.proxyChildEvents(a),a.once("render",function(){this._isShown&&o.triggerMethodOn(a,"before:show",a),r&&this._triggerBeforeAttach&&(n=this._getViewAndNested(a),this._triggerMethodMany(n,this,"before:attach"))},this),this.children.add(a),this.renderChildView(a,this._emptyViewIndex),r&&this._triggerAttach&&(n=this._getViewAndNested(a),this._triggerMethodMany(n,this,"attach")),this._isShown&&o.triggerMethodOn(a,"show",a)},getChildView:function(e){var t=this.getOption("childView");if(!t)throw new o.Error({name:"NoChildViewError",message:'A "childView" must be specified'});return t},addChild:function(e,t,i){var n=this.getOption("childViewOptions");n=o._getValue(n,this,[e,i]);var r=this.buildChildView(e,t,n);return this._updateIndices(r,!0,i),this.triggerMethod("before:add:child",r),this._addChildView(r,i),this.triggerMethod("add:child",r),r._parent=this,r},_updateIndices:function(e,t,i){this.getOption("sort")&&(t&&(e._index=i),this.children.each(function(i){i._index>=e._index&&(i._index+=t?1:-1)}))},_addChildView:function(e,t){var i,n=this._isShown&&!this.isBuffering&&o.isNodeAttached(this.el);this.proxyChildEvents(e),e.once("render",function(){this._isShown&&!this.isBuffering&&o.triggerMethodOn(e,"before:show",e),n&&this._triggerBeforeAttach&&(i=this._getViewAndNested(e),this._triggerMethodMany(i,this,"before:attach"))},this),this.children.add(e),this.renderChildView(e,t),n&&this._triggerAttach&&(i=this._getViewAndNested(e),this._triggerMethodMany(i,this,"attach")),this._isShown&&!this.isBuffering&&o.triggerMethodOn(e,"show",e)},renderChildView:function(e,t){return e.supportsRenderLifecycle||o.triggerMethodOn(e,"before:render",e),e.render(),e.supportsRenderLifecycle||o.triggerMethodOn(e,"render",e),this.attachHtml(this,e,t),e},buildChildView:function(e,t,n){var r=i.extend({model:e},n),s=new t(r);return o.MonitorDOMRefresh(s),s},removeChildView:function(e){return e?(this.triggerMethod("before:remove:child",e),e.supportsDestroyLifecycle||o.triggerMethodOn(e,"before:destroy",e),e.destroy?e.destroy():e.remove(),e.supportsDestroyLifecycle||o.triggerMethodOn(e,"destroy",e),delete e._parent,this.stopListening(e),this.children.remove(e),this.triggerMethod("remove:child",e),this._updateIndices(e,!1),e):e},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(e,t){e.$el.append(t)},_createBuffer:function(){var e=document.createDocumentFragment();return i.each(this._bufferedChildren,function(t){e.appendChild(t.el)}),e},attachHtml:function(e,t,i){e.isBuffering?e._bufferedChildren.splice(i,0,t):e._insertBefore(t,i)||e._insertAfter(t)},_insertBefore:function(e,t){var i,n=this.getOption("sort")&&t<this.children.length-1;return n&&(i=this.children.find(function(e){return e._index===t+1})),!!i&&(i.$el.before(e.el),!0)},_insertAfter:function(e){this.$el.append(e.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},destroy:function(){return this.isDestroyed?this:(this.triggerMethod("before:destroy:collection"),this.destroyChildren({checkEmpty:!1}),this.triggerMethod("destroy:collection"),o.View.prototype.destroy.apply(this,arguments))},destroyChildren:function(e){var t=e||{},n=!0,r=this.children.map(i.identity);return i.isUndefined(t.checkEmpty)||(n=t.checkEmpty),this.children.each(this.removeChildView,this),n&&this.checkEmpty(),r},_shouldAddChild:function(e,t){var n=this.getOption("filter");return!i.isFunction(n)||n.call(this,e,t,this.collection)},proxyChildEvents:function(e){var t=this.getOption("childViewEventPrefix");this.listenTo(e,"all",function(){var n=i.toArray(arguments),r=n[0],o=this.normalizeMethods(i.result(this,"childEvents"));n[0]=t+":"+r,n.splice(1,0,e),"undefined"!=typeof o&&i.isFunction(o[r])&&o[r].apply(this,n.slice(1)),this.triggerMethod.apply(this,n)})},_getImmediateChildren:function(){return i.values(this.children._views)},_getViewAndNested:function(e){return[e].concat(i.result(e,"_getNestedViews")||[])},getViewComparator:function(){return this.getOption("viewComparator")}}),o.CompositeView=o.CollectionView.extend({constructor:function(){o.CollectionView.apply(this,arguments)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this._renderChildren),this.getOption("sort")&&this.listenTo(this.collection,"sort",this._sortViews))},getChildView:function(e){var t=this.getOption("childView")||this.constructor;return t},serializeData:function(){var e={};return this.model&&(e=i.partial(this.serializeModel,this.model).apply(this,arguments)),e},render:function(){return this._ensureViewIsIntact(),this._isRendering=!0,this.resetChildViewContainer(),this.triggerMethod("before:render",this),this._renderTemplate(),this._renderChildren(),this._isRendering=!1,this.isRendered=!0,this.triggerMethod("render",this),this},_renderChildren:function(){(this.isRendered||this._isRendering)&&o.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e),this.triggerMethod("before:render:template");var t=this.getTemplate(),i=o.Renderer.render(t,e,this);this.attachElContent(i),this.bindUIElements(),this.triggerMethod("render:template")},attachElContent:function(e){return this.$el.html(e),this},attachBuffer:function(e,t){var i=this.getChildViewContainer(e);i.append(t)},_insertAfter:function(e){var t=this.getChildViewContainer(this,e);t.append(e.el)},_appendReorderedChildren:function(e){var t=this.getChildViewContainer(this);t.append(e)},getChildViewContainer:function(e,t){if(e.$childViewContainer)return e.$childViewContainer;var i,n=o.getOption(e,"childViewContainer");if(n){var r=o._getValue(n,e);if(i="@"===r.charAt(0)&&e.ui?e.ui[r.substr(4)]:e.$(r),i.length<=0)throw new o.Error({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+e.childViewContainer})}else i=e.$el;return e.$childViewContainer=i,i},resetChildViewContainer:function(){this.$childViewContainer&&(this.$childViewContainer=void 0)}}),o.LayoutView=o.ItemView.extend({regionClass:o.Region,options:{destroyImmediate:!1},childViewEventPrefix:"childview",constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),o.ItemView.call(this,e)},render:function(){return this._ensureViewIsIntact(),this._firstRender?this._firstRender=!1:this._reInitializeRegions(),o.ItemView.prototype.render.apply(this,arguments)},destroy:function(){return this.isDestroyed?this:(this.getOption("destroyImmediate")===!0&&this.$el.remove(),this.regionManager.destroy(),o.ItemView.prototype.destroy.apply(this,arguments))},showChildView:function(e,t,n){var r=this.getRegion(e);return r.show.apply(r,i.rest(arguments))},getChildView:function(e){return this.getRegion(e).currentView},addRegion:function(e,t){var i={};return i[e]=t,this._buildRegions(i)[e]},addRegions:function(e){return this.regions=i.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},getRegion:function(e){return this.regionManager.get(e)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(e){var t={regionClass:this.getOption("regionClass"),parentEl:i.partial(i.result,this,"el")};return this.regionManager.addRegions(e,t)},_initializeRegions:function(e){var t;this._initRegionManager(),t=o._getValue(this.regions,this,[e])||{};var n=this.getOption.call(e,"regions");n=o._getValue(n,this,[e]),i.extend(t,n),t=this.normalizeUIValues(t,["selector","el"]),this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.invoke("reset")},getRegionManager:function(){return new o.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager(),this.regionManager._parent=this,this.listenTo(this.regionManager,"before:add:region",function(e){this.triggerMethod("before:add:region",e)}),this.listenTo(this.regionManager,"add:region",function(e,t){this[e]=t,this.triggerMethod("add:region",e,t)}),this.listenTo(this.regionManager,"before:remove:region",function(e){this.triggerMethod("before:remove:region",e)}),this.listenTo(this.regionManager,"remove:region",function(e,t){delete this[e],this.triggerMethod("remove:region",e,t)})},_getImmediateChildren:function(){return i.chain(this.regionManager.getRegions()).pluck("currentView").compact().value()}}),o.Behavior=o.Object.extend({constructor:function(e,t){this.view=t,this.defaults=i.result(this,"defaults")||{},this.options=i.extend({},this.defaults,e),this.ui=i.extend({},i.result(t,"ui"),i.result(this,"ui")),o.Object.apply(this,arguments)},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){return this.stopListening(),this},proxyViewProperties:function(e){this.$el=e.$el,this.el=e.el}}),o.Behaviors=function(e,t){function i(e,n){return t.isObject(e.behaviors)?(n=i.parseBehaviors(e,n||t.result(e,"behaviors")),i.wrap(e,n,t.keys(s)),n):{}}function n(e,t){this._view=e,this._behaviors=t,this._triggers={}}function r(e){return e._uiBindings||e.ui}var o=/^(\S+)\s*(.*)$/,s={behaviorTriggers:function(e,t){var i=new n(this,t);return i.buildBehaviorTriggers()},behaviorEvents:function(i,n){var s={};return t.each(n,function(i,n){var a={},l=t.clone(t.result(i,"events"))||{};l=e.normalizeUIKeys(l,r(i));var h=0;t.each(l,function(e,r){var s=r.match(o),l=s[1]+"."+[this.cid,n,h++," "].join(""),c=s[2],u=l+c,d=t.isFunction(e)?e:i[e];d&&(a[u]=t.bind(d,i))},this),s=t.extend(s,a)},this),s}};return t.extend(i,{behaviorsLookup:function(){throw new e.Error({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.html#behaviorslookup"})},getBehaviorClass:function(t,n){return t.behaviorClass?t.behaviorClass:e._getValue(i.behaviorsLookup,this,[t,n])[n]},parseBehaviors:function(e,n){return t.chain(n).map(function(n,r){var o=i.getBehaviorClass(n,r),s=new o(n,e),a=i.parseBehaviors(e,t.result(s,"behaviors"));return[s].concat(a)}).flatten().value()},wrap:function(e,i,n){t.each(n,function(n){e[n]=t.partial(s[n],e[n],i)})}}),t.extend(n.prototype,{buildBehaviorTriggers:function(){return t.each(this._behaviors,this._buildTriggerHandlersForBehavior,this),this._triggers},_buildTriggerHandlersForBehavior:function(i,n){var o=t.clone(t.result(i,"triggers"))||{};o=e.normalizeUIKeys(o,r(i)),t.each(o,t.bind(this._setHandlerForBehavior,this,i,n))},_setHandlerForBehavior:function(e,t,i,n){var r=n.replace(/^\S+/,function(e){return e+".behaviortriggers"+t});this._triggers[r]=this._view._buildViewTrigger(i)}}),i}(o,i),o.AppRouter=t.Router.extend({constructor:function(e){this.options=e||{},t.Router.apply(this,arguments);var i=this.getOption("appRoutes"),n=this._getController();this.processAppRoutes(n,i),this.on("route",this._processOnRoute,this)},appRoute:function(e,t){var i=this._getController();this._addAppRoute(i,e,t)},_processOnRoute:function(e,t){if(i.isFunction(this.onRoute)){var n=i.invert(this.getOption("appRoutes"))[e];this.onRoute(e,n,t)}},processAppRoutes:function(e,t){if(t){var n=i.keys(t).reverse();i.each(n,function(i){this._addAppRoute(e,i,t[i])},this)}},_getController:function(){return this.getOption("controller")},_addAppRoute:function(e,t,n){var r=e[n];if(!r)throw new o.Error('Method "'+n+'" was not found on the controller');this.route(t,n,i.bind(r,e))},mergeOptions:o.mergeOptions,getOption:o.proxyGetOption,triggerMethod:o.triggerMethod,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),o.Application=o.Object.extend({constructor:function(e){this._initializeRegions(e),this._initCallbacks=new o.Callbacks,this.submodules={},i.extend(this,e),this._initChannel(),o.Object.apply(this,arguments)},execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("before:start",e),this._initCallbacks.run(e,this),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(e){return this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},getRegions:function(){return this._regionManager.getRegions()},module:function(e,t){var n=o.Module.getClass(t),r=i.toArray(arguments);return r.unshift(this),n.create.apply(n,r)},getRegionManager:function(){return new o.RegionManager},_initializeRegions:function(e){var t=i.isFunction(this.regions)?this.regions(e):this.regions||{};this._initRegionManager();var n=o.getOption(e,"regions");return i.isFunction(n)&&(n=n.call(this,e)),i.extend(t,n),this.addRegions(t),this},_initRegionManager:function(){this._regionManager=this.getRegionManager(),this._regionManager._parent=this,this.listenTo(this._regionManager,"before:add:region",function(){o._triggerMethod(this,"before:add:region",arguments)}),this.listenTo(this._regionManager,"add:region",function(e,t){this[e]=t,o._triggerMethod(this,"add:region",arguments)}),this.listenTo(this._regionManager,"before:remove:region",function(){o._triggerMethod(this,"before:remove:region",arguments)}),this.listenTo(this._regionManager,"remove:region",function(e){delete this[e],o._triggerMethod(this,"remove:region",arguments)})},_initChannel:function(){this.channelName=i.result(this,"channelName")||"global",this.channel=i.result(this,"channel")||t.Wreqr.radio.channel(this.channelName),this.vent=i.result(this,"vent")||this.channel.vent,this.commands=i.result(this,"commands")||this.channel.commands,this.reqres=i.result(this,"reqres")||this.channel.reqres}}),o.Module=function(e,t,n){this.moduleName=e,this.options=i.extend({},this.options,n),this.initialize=n.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,i.isFunction(this.initialize)&&this.initialize(e,t,this.options)},o.Module.extend=o.extend,i.extend(o.Module.prototype,t.Events,{startWithParent:!0,initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(i.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,this.triggerMethod("before:stop"),i.invoke(this.submodules,"stop"),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,n){if(e){var r=i.flatten([this,this.app,t,o,t.$,i,n]);e.apply(this,r)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new o.Callbacks,this._finalizerCallbacks=new o.Callbacks},triggerMethod:o.triggerMethod}),i.extend(o.Module,{create:function(e,t,n){var r=e,o=i.drop(arguments,3);t=t.split(".");var s=t.length,a=[];return a[s-1]=n,i.each(t,function(t,i){var s=r;r=this._getModule(s,t,e,n),this._addModuleDefinition(s,r,a[i],o)},this),r},_getModule:function(e,t,n,r,o){var s=i.extend({},r),a=this.getClass(r),l=e[t];return l||(l=new a(t,n,s),e[t]=l,e.submodules[t]=l),l},getClass:function(e){var t=o.Module;return e?e.prototype instanceof t?e:e.moduleClass||t:t},_addModuleDefinition:function(e,t,i,n){var r=this._getDefine(i),o=this._getStartWithParent(i,t);r&&t.addDefinition(r,n),this._addStartWithParent(e,t,o)},_getStartWithParent:function(e,t){var n;return i.isFunction(e)&&e.prototype instanceof o.Module?(n=t.constructor.prototype.startWithParent,!!i.isUndefined(n)||n):!i.isObject(e)||(n=e.startWithParent,!!i.isUndefined(n)||n)},_getDefine:function(e){return!i.isFunction(e)||e.prototype instanceof o.Module?i.isObject(e)?e.define:null:e},_addStartWithParent:function(e,t,i){t.startWithParent=t.startWithParent&&i,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),o})},function(e,t,i){var n,r;!function(o,s){n=[i(4),i(3)],r=function(e,t){return s(e,t)}.apply(t,n),!(void 0!==r&&(e.exports=r))}(this,function(e,t){"use strict";var i=e.Wreqr,n=e.Wreqr={};return e.Wreqr.VERSION="1.3.6",e.Wreqr.noConflict=function(){return e.Wreqr=i,this},n.Handlers=function(e,t){var i=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,i){var n=null;t.isObject(e)&&!t.isFunction(e)&&(n=e.context,e=e.callback),this.setHandler(i,e,n)},this)},setHandler:function(e,t,i){var n={callback:t,context:i};this._wreqrHandlers[e]=n,this.trigger("handler:add",e,t,i)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];
if(t)return function(){return t.callback.apply(t.context,arguments)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),i}(e,t),n.CommandStorage=function(){var i=function(e){this.options=e,this._commands={},t.isFunction(this.initialize)&&this.initialize(e)};return t.extend(i.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var i=this.getCommands(e);i.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),i}(),n.Commands=function(e,t){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this),e.Handlers.prototype.constructor.apply(this,arguments)},execute:function(e){e=arguments[0];var i=t.rest(arguments);this.hasHandler(e)?this.getHandler(e).apply(this,i):this.storage.addCommand(e,i)},_executeCommands:function(e,i,n){var r=this.storage.getCommands(e);t.each(r.instances,function(e){i.apply(n,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var i,n=e.storageType||this.storageType;i=t.isFunction(n)?new n:n,this.storage=i}})}(n,t),n.RequestResponse=function(e,t){return e.Handlers.extend({request:function(e){if(this.hasHandler(e))return this.getHandler(e).apply(this,t.rest(arguments))}})}(n,t),n.EventAggregator=function(e,t){var i=function(){};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events),i}(e,t),n.Channel=function(i){var n=function(t){this.vent=new e.Wreqr.EventAggregator,this.reqres=new e.Wreqr.RequestResponse,this.commands=new e.Wreqr.Commands,this.channelName=t};return t.extend(n.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(e,t){return this._connect("vent",e,t),this},connectCommands:function(e,t){return this._connect("commands",e,t),this},connectRequests:function(e,t){return this._connect("reqres",e,t),this},_connect:function(e,i,n){if(i){n=n||this;var r="vent"===e?"on":"setHandler";t.each(i,function(i,o){this[e][r](o,t.bind(i,n))},this)}}}),n}(n),n.radio=function(e,t){var i=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};t.extend(i.prototype,{channel:function(e){if(!e)throw new Error("Channel must receive a name");return this._getChannel(e)},_getChannel:function(t){var i=this._channels[t];return i||(i=new e.Channel(t),this._channels[t]=i),i},_proxyMethods:function(){t.each(["vent","commands","reqres"],function(e){t.each(n[e],function(t){this[e][t]=r(this,e,t)},this)},this)}});var n={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},r=function(e,i,n){return function(r){var o=e._getChannel(r)[i];return o[n].apply(o,t.rest(arguments))}};return new i}(n,t),e.Wreqr})},function(e,t,i){var n,r;!function(o,s){n=[i(4),i(3)],r=function(e,t){return s(e,t)}.apply(t,n),!(void 0!==r&&(e.exports=r))}(this,function(e,t){"use strict";var i=e.ChildViewContainer;return e.ChildViewContainer=function(e,t){var i=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(i.prototype,{add:function(e,t){var i=e.cid;return this._views[i]=e,e.model&&(this._indexByModel[e.model.cid]=i),t&&(this._indexByCustom[t]=i),this._updateLength(),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var i=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){if(e===i)return delete this._indexByCustom[t],!0},this),delete this._views[i],this._updateLength(),this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,i){t.each(this._views,function(n){t.isFunction(n[e])&&n[e].apply(n,i||[])})},_updateLength:function(){this.length=t.size(this._views)}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce"];return t.each(n,function(e){i.prototype[e]=function(){var i=t.values(this._views),n=[i].concat(t.toArray(arguments));return t[e].apply(t,n)}}),i}(e,t),e.ChildViewContainer.VERSION="0.1.11",e.ChildViewContainer.noConflict=function(){return e.ChildViewContainer=i,this},e.ChildViewContainer})},function(e,t,i){"use strict";i(9);var n=function(){function e(){this._globalChannel=Backbone.Radio.channel("global")}return Object.defineProperty(e.prototype,"globalChannel",{get:function(){return this._globalChannel},enumerable:!0,configurable:!0}),e}();t.Radio=n},function(e,t,i){!function(t,n){e.exports=n(i(3),i(4))}(this,function(e,t){"use strict";function i(e,t,i,n){var r=e[t];if(!(i&&i!==r.callback&&i!==r.callback._callback||n&&n!==r.context))return delete e[t],!0}function n(t,n,r,o){t||(t={});for(var s=n?[n]:e.keys(t),a=!1,l=0,h=s.length;l<h;l++)n=s[l],t[n]&&i(t,n,r,o)&&(a=!0);return a}function r(t){return c[t]||(c[t]=e.bind(l.log,l,t))}function o(t){return e.isFunction(t)?t:function(){return t}}e="default"in e?e.default:e,t="default"in t?t.default:t;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=t.Radio,l=t.Radio={};l.VERSION="2.0.0",l.noConflict=function(){return t.Radio=a,this},l.DEBUG=!1,l._debugText=function(e,t,i){return e+(i?" on the "+i+" channel":"")+': "'+t+'"'},l.debugLog=function(e,t,i){l.DEBUG&&console&&console.warn&&console.warn(l._debugText(e,t,i))};var h=/\s+/;l._eventsApi=function(t,i,n,r){if(!n)return!1;var o={};if("object"===("undefined"==typeof n?"undefined":s(n))){for(var a in n){var l=t[i].apply(t,[a,n[a]].concat(r));h.test(a)?e.extend(o,l):o[a]=l}return o}if(h.test(n)){for(var c=n.split(h),u=0,d=c.length;u<d;u++)o[c[u]]=t[i].apply(t,[c[u]].concat(r));return o}return!1},l._callHandler=function(e,t,i){var n=i[0],r=i[1],o=i[2];switch(i.length){case 0:return e.call(t);case 1:return e.call(t,n);case 2:return e.call(t,n,r);case 3:return e.call(t,n,r,o);default:return e.apply(t,i)}};var c={};e.extend(l,{log:function(t,i){if("undefined"!=typeof console){var n=e.toArray(arguments).slice(2);console.log("["+t+'] "'+i+'"',n)}},tuneIn:function(e){var t=l.channel(e);return t._tunedIn=!0,t.on("all",r(e)),this},tuneOut:function(e){var t=l.channel(e);return t._tunedIn=!1,t.off("all",r(e)),delete c[e],this}}),l.Requests={request:function(t){var i=e.toArray(arguments).slice(1),n=l._eventsApi(this,"request",t,i);if(n)return n;var r=this.channelName,o=this._requests;if(r&&this._tunedIn&&l.log.apply(this,[r,t].concat(i)),o&&(o[t]||o.default)){var s=o[t]||o.default;return i=o[t]?i:arguments,l._callHandler(s.callback,s.context,i)}l.debugLog("An unhandled request was fired",t,r)},reply:function(e,t,i){return l._eventsApi(this,"reply",e,[t,i])?this:(this._requests||(this._requests={}),this._requests[e]&&l.debugLog("A request was overwritten",e,this.channelName),this._requests[e]={callback:o(t),context:i||this},this)},replyOnce:function(t,i,n){if(l._eventsApi(this,"replyOnce",t,[i,n]))return this;var r=this,s=e.once(function(){return r.stopReplying(t),o(i).apply(this,arguments)});return this.reply(t,s,n)},stopReplying:function(e,t,i){return l._eventsApi(this,"stopReplying",e)?this:(e||t||i?n(this._requests,e,t,i)||l.debugLog("Attempted to remove the unregistered request",e,this.channelName):delete this._requests,this)}},l._channels={},l.channel=function(e){if(!e)throw new Error("You must provide a name for the channel.");return l._channels[e]?l._channels[e]:l._channels[e]=new l.Channel(e)},l.Channel=function(e){this.channelName=e},e.extend(l.Channel.prototype,t.Events,l.Requests,{reset:function(){return this.off(),this.stopListening(),this.stopReplying(),this}});var u,d,f=[t.Events,l.Requests];return e.each(f,function(t){e.each(t,function(t,i){l[i]=function(t){return d=e.toArray(arguments).slice(1),u=this.channel(t),u[i].apply(u,d)}})}),l.reset=function(t){var i=t?[this._channels[t]]:this._channels;e.each(i,function(e){e.reset()})},l})},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(4),o=i(3),s=i(1),a=i(11),l=i(22),h=i(39),c=i(48),u=i(52),d=function(e){function t(){e.call(this),this.routes={"":this.home,"worksheet(/:accessionNumber)":this.worksheet},this._bindRoutes(),o.bindAll(this,"home","worksheet")}return n(t,e),t.prototype.home=function(){new a.HomeTopLevelView({model:new r.Model}).render()},t.prototype.worksheet=function(e){return e?void new u.WorksheetTopLevelView({model:h.Worksheet.fetchFromService({accessionNumber:e})}).render():void s.Application.instance.modalRegion.show(new c.WorksheetAccessionNumberPickerView({availableAccessionNumbers:l.Services.instance.worksheetQueryService.getWorksheetAccessionNumbersSync()}))},t}(r.Router);t.Router=d},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(12),o=i(18),s=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.onRender=function(){e.prototype.onRender.call(this),this.showChildView("content",new r.HomeContentView)},t}(o.TopLevelView);t.HomeTopLevelView=s},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(3),o=i(4),s=i(5);i(13);var a=function(e){function t(t){e.call(this,r.extend({model:new o.Model,template:r.template(i(17))}))}return n(t,e),t}(s.ItemView);t.HomeContentView=a},function(e,t){},,,,function(e,t){e.exports='<div id="home">\r\n    <h3 class="page-header" style="text-align: center">Welcome to DressDiscover!</h3>\r\n    <h5>Click on the <a href="#worksheet">Worksheet</a> tab to start a new worksheet.</h5>\r\n</div>\r\n'},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(3),o=i(5),s=i(19),a=function(e){function t(t){e.call(this,r.extend(t,{el:"#app",regions:{content:"#content",navbar:"#navbar"},template:r.template(i(21))}))}return n(t,e),t.prototype.onRender=function(){this.showChildView("navbar",new s.NavbarView)},t}(o.LayoutView);t.TopLevelView=a},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(3),o=i(5),s=function(e){function t(){e.apply(this,arguments),this.template=r.template(i(20))}return n(t,e),t}(o.ItemView);t.NavbarView=s},function(e,t){e.exports='<nav class="navbar navbar-default">\n    <div class="container-fluid">\n        <!-- Brand and toggle get grouped for better mobile display -->\n        <div class="navbar-header">\n            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1" aria-expanded="false">\n                <span class="sr-only">Toggle navigation</span>\n                <span class="icon-bar"></span>\n                <span class="icon-bar"></span>\n                <span class="icon-bar"></span>\n            </button>\n            <a class="navbar-brand" href="#">DressDiscover</a>\n        </div>\n        <!-- Collect the nav links, forms, and other content for toggling -->\n        <div class="collapse navbar-collapse" id="navbar-collapse-1">\n            <ul class="nav navbar-nav">\n                <li class="active"><a href="#worksheet">Worksheet <span class="sr-only">(current)</span></a></li>\n            </ul>\n        </div><!-- /.navbar-collapse -->\n    </div><!-- /.container-fluid -->\n</nav>\n'},function(e,t){e.exports='<div id="navbar"></div>\r\n<div id="content"></div>\r\n'},function(e,t,i){"use strict";var n=i(23),r=i(25),o=function(){function e(){this._worksheetCommandService=new n.LocalWorksheetCommandService,this._worksheetQueryService=new r.LocalWorksheetQueryService}return Object.defineProperty(e,"instance",{get:function(){return e._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"worksheetCommandService",{get:function(){return this._worksheetCommandService},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"worksheetQueryService",{get:function(){return this._worksheetQueryService},enumerable:!0,configurable:!0}),e._instance=new e,e}();t.Services=o},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(24),o=i(25),s=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.putWorksheetStateSync=function(e){var t=JSON.stringify(e.state.toThryftJSON());console.info("state to service: "+t),localStorage.setItem(o.LocalWorksheetQueryService.getWorksheetStateItemKey(e.state.accessionNumber),t)},t}(r.AsyncToSyncWorksheetCommandService);t.LocalWorksheetCommandService=s},function(e,t){"use strict";var i=function(){function e(){}return e.prototype.putWorksheetStateAsync=function(e){try{this.putWorksheetStateSync({state:e.state}),e.success()}catch(t){e.error(null,t.message,t)}},e}();t.AsyncToSyncWorksheetCommandService=i},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(26),o=i(4),s=i(27),a=i(28),l=i(34),h=function(e){function t(){e.call(this);for(var t=[],i=0,n=DEFINITIONS;i<n.length;i++){var r=n[i];t.push(a.WorksheetFeatureSetDefinition.fromThryftJSON(r))}this._worksheetDefinition=new s.WorksheetDefinition({rootFeatureSets:new o.Collection(t)})}return n(t,e),t.prototype.getWorksheetAccessionNumbersSync=function(){for(var e=[],i=0;;i++){var n=localStorage.key(i);if(null==n)break;n.match("^"+t._WORKSHEET_ITEM_KEY_PREFIX)||n.length!=t._WORKSHEET_ITEM_KEY_PREFIX.length&&e.push(n.substr(t._WORKSHEET_ITEM_KEY_PREFIX.length))}return e},t.prototype.getWorksheetDefinitionSync=function(){return this._worksheetDefinition},t.getWorksheetStateItemKey=function(e){return t._WORKSHEET_ITEM_KEY_PREFIX+e},t.prototype.getWorksheetStateSync=function(e){var i=localStorage.getItem(t.getWorksheetStateItemKey(e.accessionNumber));return console.info("state from service: "+i),null==i?new l.WorksheetState:l.WorksheetState.fromThryftJSON(JSON.parse(i))},t._WORKSHEET_ITEM_KEY_PREFIX="worksheet/state/",t}(r.AsyncToSyncWorksheetQueryService);t.LocalWorksheetQueryService=h},function(e,t){"use strict";var i=function(){function e(){}return e.prototype.getWorksheetAccessionNumbersAsync=function(e){try{e.success(this.getWorksheetAccessionNumbersSync())}catch(t){e.error(null,t.message,t)}},e.prototype.getWorksheetDefinitionAsync=function(e){try{e.success(this.getWorksheetDefinitionSync())}catch(t){e.error(null,t.message,t)}},e.prototype.getWorksheetStateAsync=function(e){try{e.success(this.getWorksheetStateSync({accessionNumber:e.accessionNumber}))}catch(t){e.error(null,t.message,t)}},e}();t.AsyncToSyncWorksheetQueryService=i},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(4),o=i(28),s=function(e){function t(t,i){e.call(this,t,i),this.validation={rootFeatureSets:{fn:function(e,t,i){if(!(e instanceof r.Collection))return"expected WorksheetDefinition.root_feature_sets to be a Backbone.Collection";if(e.model!==o.WorksheetFeatureSetDefinition)return"expected WorksheetDefinition.root_feature_sets to be a Backbone.Collection with model=WorksheetFeatureSetDefinition";for(var n=0,s=e.models;n<s.length;n++){var a=s[n];if(!a.isValid(!0))return a.validationError}},required:!0}}}return n(t,e),Object.defineProperty(t.prototype,"rootFeatureSets",{get:function(){return this.get("rootFeatureSets")},set:function(e){this.set("rootFeatureSets",e,{validate:!0})},enumerable:!0,configurable:!0}),t.fromThryftJSON=function(e){var i=new t;for(var n in e)"root_feature_sets"==n&&(i.attributes.rootFeatureSets=function(e){for(var t=[],i=0;i<e.length;i++)t.push(o.WorksheetFeatureSetDefinition.fromThryftJSON(e[i]));return new r.Collection(t)}(e[n]));if(!i.isValid(!0))throw new Error(i.validationError);return i},t.prototype.toThryftJSON=function(){var e={};return e.root_feature_sets=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].toThryftJSON());return t}(this.rootFeatureSets.models),e},t}(r.Model);t.WorksheetDefinition=s},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(4),o=i(29),s=function(e){function t(i,n){e.call(this,i,n),this.validation={id:{fn:function(e,t,i){if("string"!=typeof e)return"expected WorksheetFeatureSetDefinition.id to be a string"},required:!0},childFeatureSets:{fn:function(e,i,n){if("undefined"!=typeof i&&null!==i){if(!(e instanceof r.Collection))return"expected WorksheetFeatureSetDefinition.child_feature_sets to be a Backbone.Collection";if(e.model!==t)return"expected WorksheetFeatureSetDefinition.child_feature_sets to be a Backbone.Collection with model=WorksheetFeatureSetDefinition";for(var o=0,s=e.models;o<s.length;o++){var a=s[o];if(!a.isValid(!0))return a.validationError}}},minLength:1,required:!1},displayName:{fn:function(e,t,i){if("undefined"!=typeof t&&null!==t)return"string"!=typeof e?"expected WorksheetFeatureSetDefinition.display_name to be a string":/^\s*$/.test(e)?"WorksheetFeatureSetDefinition.display_name is blank":void 0},minLength:1,required:!1},features:{fn:function(e,t,i){if("undefined"!=typeof t&&null!==t){if(!(e instanceof r.Collection))return"expected WorksheetFeatureSetDefinition.features to be a Backbone.Collection";if(e.model!==o.WorksheetFeatureDefinition)return"expected WorksheetFeatureSetDefinition.features to be a Backbone.Collection with model=WorksheetFeatureDefinition";for(var n=0,s=e.models;n<s.length;n++){var a=s[n];if(!a.isValid(!0))return a.validationError}}},minLength:1,required:!1}}}return n(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.get("id")},set:function(e){this.set("id",e,{validate:!0})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childFeatureSets",{get:function(){return this.get("childFeatureSets")},set:function(e){this.set("childFeatureSets",e,{validate:!0})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayName",{get:function(){return this.get("displayName")},set:function(e){this.set("displayName",e,{validate:!0})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"features",{get:function(){return this.get("features")},set:function(e){this.set("features",e,{validate:!0})},enumerable:!0,configurable:!0}),t.fromThryftJSON=function(e){var i=new t;for(var n in e)"id"==n?i.attributes.id=e[n]:"child_feature_sets"==n?i.attributes.childFeatureSets=function(e){for(var i=[],n=0;n<e.length;n++)i.push(t.fromThryftJSON(e[n]));return new r.Collection(i)}(e[n]):"display_name"==n?i.attributes.displayName=e[n]:"features"==n&&(i.attributes.features=function(e){for(var t=[],i=0;i<e.length;i++)t.push(o.WorksheetFeatureDefinition.fromThryftJSON(e[i]));return new r.Collection(t)}(e[n]));if(!i.isValid(!0))throw new Error(i.validationError);return i},t.prototype.toThryftJSON=function(){var e={};return e.id=this.id,this.has("childFeatureSets")&&(e.child_feature_sets=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].toThryftJSON());return t}(this.childFeatureSets.models)),this.has("displayName")&&(e.display_name=this.displayName),this.has("features")&&(e.features=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].toThryftJSON());return t}(this.features.models)),e},t}(r.Model);t.WorksheetFeatureSetDefinition=s},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(4),o=i(30),s=i(33),a=function(e){function t(t,i){e.call(this,t,i),this.validation={id:{fn:function(e,t,i){if("string"!=typeof e)return"expected WorksheetFeatureDefinition.id to be a string"},required:!0},displayName:{fn:function(e,t,i){if("undefined"!=typeof t&&null!==t)return"string"!=typeof e?"expected WorksheetFeatureDefinition.display_name to be a string":/^\s*$/.test(e)?"WorksheetFeatureDefinition.display_name is blank":void 0},minLength:1,required:!1},enum_:{fn:function(e,t,i){if("undefined"!=typeof t&&null!==t)return e instanceof o.WorksheetEnumFeatureDefinition?e.isValid(!0)?void 0:e.validationError:"expected WorksheetFeatureDefinition.enum_ to be a WorksheetEnumFeatureDefinition"},required:!1},text:{fn:function(e,t,i){if("undefined"!=typeof t&&null!==t)return e instanceof s.WorksheetTextFeatureDefinition?e.isValid(!0)?void 0:e.validationError:"expected WorksheetFeatureDefinition.text to be a WorksheetTextFeatureDefinition"},required:!1}}}return n(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.get("id")},set:function(e){this.set("id",e,{validate:!0})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayName",{get:function(){return this.get("displayName")},set:function(e){this.set("displayName",e,{validate:!0})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enum_",{get:function(){return this.get("enum_")},set:function(e){this.set("enum_",e,{validate:!0})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.get("text")},set:function(e){this.set("text",e,{validate:!0})},enumerable:!0,configurable:!0}),t.fromThryftJSON=function(e){var i=new t;for(var n in e)"id"==n?i.attributes.id=e[n]:"display_name"==n?i.attributes.displayName=e[n]:"enum_"==n?i.attributes.enum_=o.WorksheetEnumFeatureDefinition.fromThryftJSON(e[n]):"text"==n&&(i.attributes.text=s.WorksheetTextFeatureDefinition.fromThryftJSON(e[n]));if(!i.isValid(!0))throw new Error(i.validationError);return i},t.prototype.toThryftJSON=function(){var e={};return e.id=this.id,this.has("displayName")&&(e.display_name=this.displayName),this.has("enum_")&&(e.enum_=this.enum_.toThryftJSON()),this.has("text")&&(e.text=this.text.toThryftJSON()),e},t}(r.Model);t.WorksheetFeatureDefinition=a},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(4),o=i(31),s=function(e){function t(t,i){e.call(this,t,i),this.validation={values_:{fn:function(e,t,i){if(!(e instanceof r.Collection))return"expected WorksheetEnumFeatureDefinition.values_ to be a Backbone.Collection";if(e.model!==o.WorksheetEnumFeatureValueDefinition)return"expected WorksheetEnumFeatureDefinition.values_ to be a Backbone.Collection with model=WorksheetEnumFeatureValueDefinition";for(var n=0,s=e.models;n<s.length;n++){var a=s[n];if(!a.isValid(!0))return a.validationError}},minLength:1,required:!0}}}return n(t,e),Object.defineProperty(t.prototype,"values_",{get:function(){return this.get("values_")},set:function(e){this.set("values_",e,{validate:!0})},enumerable:!0,configurable:!0}),t.fromThryftJSON=function(e){var i=new t;for(var n in e)"values_"==n&&(i.attributes.values_=function(e){for(var t=[],i=0;i<e.length;i++)t.push(o.WorksheetEnumFeatureValueDefinition.fromThryftJSON(e[i]));return new r.Collection(t)}(e[n]));if(!i.isValid(!0))throw new Error(i.validationError);return i},t.prototype.toThryftJSON=function(){var e={};return e.values_=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].toThryftJSON());return t}(this.values_.models),e},t}(r.Model);t.WorksheetEnumFeatureDefinition=s},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(4),o=i(32),s=function(e){function t(t,i){e.call(this,t,i),this.validation={id:{fn:function(e,t,i){if("string"!=typeof e)return"expected WorksheetEnumFeatureValueDefinition.id to be a string"},required:!0},displayName:{fn:function(e,t,i){if("undefined"!=typeof t&&null!==t)return"string"!=typeof e?"expected WorksheetEnumFeatureValueDefinition.display_name to be a string":/^\s*$/.test(e)?"WorksheetEnumFeatureValueDefinition.display_name is blank":void 0},minLength:1,required:!1},image:{fn:function(e,t,i){if("undefined"!=typeof t&&null!==t)return e instanceof o.WorksheetEnumFeatureValueImage?e.isValid(!0)?void 0:e.validationError:"expected WorksheetEnumFeatureValueDefinition.image to be a WorksheetEnumFeatureValueImage"},required:!1}}}return n(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.get("id")},set:function(e){this.set("id",e,{validate:!0})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayName",{get:function(){return this.get("displayName")},set:function(e){this.set("displayName",e,{validate:!0})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"image",{get:function(){return this.get("image")},set:function(e){this.set("image",e,{validate:!0})},enumerable:!0,configurable:!0}),t.fromThryftJSON=function(e){var i=new t;for(var n in e)"id"==n?i.attributes.id=e[n]:"display_name"==n?i.attributes.displayName=e[n]:"image"==n&&(i.attributes.image=o.WorksheetEnumFeatureValueImage.fromThryftJSON(e[n]));if(!i.isValid(!0))throw new Error(i.validationError);return i},t.prototype.toThryftJSON=function(){var e={};return e.id=this.id,this.has("displayName")&&(e.display_name=this.displayName),this.has("image")&&(e.image=this.image.toThryftJSON()),e},t}(r.Model);t.WorksheetEnumFeatureValueDefinition=s},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(4),o=function(e){function t(t,i){e.call(this,t,i),this.validation={rights:{fn:function(e,t,i){return"string"!=typeof e?"expected WorksheetEnumFeatureValueImage.rights to be a string":/^\s*$/.test(e)?"WorksheetEnumFeatureValueImage.rights is blank":void 0},minLength:1,required:!0},thumbnailUrl:{fn:function(e,t,i){return"string"!=typeof e?"expected WorksheetEnumFeatureValueImage.thumbnail_url to be a string":/^\s*$/.test(e)?"WorksheetEnumFeatureValueImage.thumbnail_url is blank":void 0},minLength:1,required:!0},fullSizeUrl:{fn:function(e,t,i){if("undefined"!=typeof t&&null!==t)return"string"!=typeof e?"expected WorksheetEnumFeatureValueImage.full_size_url to be a string":/^\s*$/.test(e)?"WorksheetEnumFeatureValueImage.full_size_url is blank":void 0},minLength:1,required:!1}}}return n(t,e),Object.defineProperty(t.prototype,"rights",{get:function(){return this.get("rights")},set:function(e){this.set("rights",e,{validate:!0})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"thumbnailUrl",{get:function(){return this.get("thumbnailUrl")},set:function(e){this.set("thumbnailUrl",e,{validate:!0})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullSizeUrl",{get:function(){return this.get("fullSizeUrl")},set:function(e){this.set("fullSizeUrl",e,{validate:!0})},enumerable:!0,configurable:!0}),t.fromThryftJSON=function(e){var i=new t;for(var n in e)"rights"==n?i.attributes.rights=e[n]:"thumbnail_url"==n?i.attributes.thumbnailUrl=e[n]:"full_size_url"==n&&(i.attributes.fullSizeUrl=e[n]);if(!i.isValid(!0))throw new Error(i.validationError);return i},t.prototype.toThryftJSON=function(){var e={};return e.rights=this.rights,e.thumbnail_url=this.thumbnailUrl,this.has("fullSizeUrl")&&(e.full_size_url=this.fullSizeUrl),e},t}(r.Model);t.WorksheetEnumFeatureValueImage=o},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(4),o=function(e){function t(t,i){e.call(this,t,i),this.validation={}}return n(t,e),t.fromThryftJSON=function(e){return new t},t.prototype.toThryftJSON=function(){return{}},t}(r.Model);t.WorksheetTextFeatureDefinition=o},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(4),o=i(35),s=function(e){function t(t,i){e.call(this,t,i),this.validation={accessionNumber:{fn:function(e,t,i){if("string"!=typeof e)return"expected WorksheetState.accession_number to be a string"},required:!0},rootFeatureSets:{fn:function(e,t,i){if("undefined"!=typeof t&&null!==t){if("object"!=typeof e)return"expected WorksheetState.root_feature_sets to be an object";for(var n in e){var r=e[n];if("string"!=typeof n)return"expected WorksheetState.root_feature_sets key to be a string";if(!(r instanceof o.WorksheetFeatureSetState))return"expected WorksheetState.root_feature_sets value to be a WorksheetFeatureSetState";if(!r.isValid(!0))return r.validationError}}},minLength:1,required:!1}}}return n(t,e),Object.defineProperty(t.prototype,"accessionNumber",{get:function(){return this.get("accessionNumber")},set:function(e){this.set("accessionNumber",e,{validate:!0})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rootFeatureSets",{get:function(){return this.get("rootFeatureSets")},set:function(e){this.set("rootFeatureSets",e,{validate:!0})},enumerable:!0,configurable:!0}),t.fromThryftJSON=function(e){var i=new t;for(var n in e)"accession_number"==n?i.attributes.accessionNumber=e[n]:"root_feature_sets"==n&&(i.attributes.rootFeatureSets=function(e){var t={};for(var i in e)t[i]=o.WorksheetFeatureSetState.fromThryftJSON(e[i]);return t}(e[n]));if(!i.isValid(!0))throw new Error(i.validationError);return i},t.prototype.toThryftJSON=function(){var e={};return e.accession_number=this.accessionNumber,this.has("rootFeatureSets")&&(e.root_feature_sets=function(e){var t={};for(var i in e)t[i]=e[i].toThryftJSON();return t}(this.rootFeatureSets)),e},t}(r.Model);t.WorksheetState=s},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(4),o=i(36),s=function(e){function t(i,n){e.call(this,i,n),this.validation={childFeatureSets:{fn:function(e,i,n){if("undefined"!=typeof i&&null!==i){if("object"!=typeof e)return"expected WorksheetFeatureSetState.child_feature_sets to be an object";for(var r in e){var o=e[r];if("string"!=typeof r)return"expected WorksheetFeatureSetState.child_feature_sets key to be a string";if(!(o instanceof t))return"expected WorksheetFeatureSetState.child_feature_sets value to be a WorksheetFeatureSetState";
if(!o.isValid(!0))return o.validationError}}},minLength:1,required:!1},features:{fn:function(e,t,i){if("undefined"!=typeof t&&null!==t){if("object"!=typeof e)return"expected WorksheetFeatureSetState.features to be an object";for(var n in e){var r=e[n];if("string"!=typeof n)return"expected WorksheetFeatureSetState.features key to be a string";if(!(r instanceof o.WorksheetFeatureState))return"expected WorksheetFeatureSetState.features value to be a WorksheetFeatureState";if(!r.isValid(!0))return r.validationError}}},minLength:1,required:!1}}}return n(t,e),Object.defineProperty(t.prototype,"childFeatureSets",{get:function(){return this.get("childFeatureSets")},set:function(e){this.set("childFeatureSets",e,{validate:!0})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"features",{get:function(){return this.get("features")},set:function(e){this.set("features",e,{validate:!0})},enumerable:!0,configurable:!0}),t.fromThryftJSON=function(e){var i=new t;for(var n in e)"child_feature_sets"==n?i.attributes.childFeatureSets=function(e){var i={};for(var n in e)i[n]=t.fromThryftJSON(e[n]);return i}(e[n]):"features"==n&&(i.attributes.features=function(e){var t={};for(var i in e)t[i]=o.WorksheetFeatureState.fromThryftJSON(e[i]);return t}(e[n]));if(!i.isValid(!0))throw new Error(i.validationError);return i},t.prototype.toThryftJSON=function(){var e={};return this.has("childFeatureSets")&&(e.child_feature_sets=function(e){var t={};for(var i in e)t[i]=e[i].toThryftJSON();return t}(this.childFeatureSets)),this.has("features")&&(e.features=function(e){var t={};for(var i in e)t[i]=e[i].toThryftJSON();return t}(this.features)),e},t}(r.Model);t.WorksheetFeatureSetState=s},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(4),o=i(37),s=i(38),a=function(e){function t(t,i){e.call(this,t,i),this.validation={enum_:{fn:function(e,t,i){if("undefined"!=typeof t&&null!==t)return e instanceof o.WorksheetEnumFeatureState?e.isValid(!0)?void 0:e.validationError:"expected WorksheetFeatureState.enum_ to be a WorksheetEnumFeatureState"},required:!1},text:{fn:function(e,t,i){if("undefined"!=typeof t&&null!==t)return e instanceof s.WorksheetTextFeatureState?e.isValid(!0)?void 0:e.validationError:"expected WorksheetFeatureState.text to be a WorksheetTextFeatureState"},required:!1}}}return n(t,e),Object.defineProperty(t.prototype,"enum_",{get:function(){return this.get("enum_")},set:function(e){this.set("enum_",e,{validate:!0})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.get("text")},set:function(e){this.set("text",e,{validate:!0})},enumerable:!0,configurable:!0}),t.fromThryftJSON=function(e){var i=new t;for(var n in e)"enum_"==n?i.attributes.enum_=o.WorksheetEnumFeatureState.fromThryftJSON(e[n]):"text"==n&&(i.attributes.text=s.WorksheetTextFeatureState.fromThryftJSON(e[n]));if(!i.isValid(!0))throw new Error(i.validationError);return i},t.prototype.toThryftJSON=function(){var e={};return this.has("enum_")&&(e.enum_=this.enum_.toThryftJSON()),this.has("text")&&(e.text=this.text.toThryftJSON()),e},t}(r.Model);t.WorksheetFeatureState=a},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(4),o=function(e){function t(t,i){e.call(this,t,i),this.validation={selectedValues:{fn:function(e,t,i){if(!Array.isArray(e))return"expected WorksheetEnumFeatureState.selected_values to be an Array";for(var n=0;n<e.length;n++)if("string"!=typeof e[n])return"expected WorksheetEnumFeatureState.selected_values[i] to be a string"},minLength:1,required:!0}}}return n(t,e),Object.defineProperty(t.prototype,"selectedValues",{get:function(){return this.get("selectedValues")},set:function(e){this.set("selectedValues",e,{validate:!0})},enumerable:!0,configurable:!0}),t.fromThryftJSON=function(e){var i=new t;for(var n in e)"selected_values"==n&&(i.attributes.selectedValues=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t}(e[n]));if(!i.isValid(!0))throw new Error(i.validationError);return i},t.prototype.toThryftJSON=function(){var e={};return e.selected_values=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t}(this.selectedValues),e},t}(r.Model);t.WorksheetEnumFeatureState=o},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(4),o=function(e){function t(t,i){e.call(this,t,i),this.validation={text:{fn:function(e,t,i){return"string"!=typeof e?"expected WorksheetTextFeatureState.text to be a string":/^\s*$/.test(e)?"WorksheetTextFeatureState.text is blank":void 0},minLength:1,required:!0}}}return n(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return this.get("text")},set:function(e){this.set("text",e,{validate:!0})},enumerable:!0,configurable:!0}),t.fromThryftJSON=function(e){var i=new t;for(var n in e)"text"==n&&(i.attributes.text=e[n]);if(!i.isValid(!0))throw new Error(i.validationError);return i},t.prototype.toThryftJSON=function(){var e={};return e.text=this.text,e},t}(r.Model);t.WorksheetTextFeatureState=o},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(3),o=i(4),s=i(22),a=i(40),l=i(41),h=i(34),c=function(e){function t(t){e.call(this),this._accessionNumber=t.accessionNumber;for(var i=[],n=0,r=t.definition.rootFeatureSets.models;n<r.length;n++){var o=r[n];i.push(new l.WorksheetFeatureSet(o,t.initialState.rootFeatureSets?t.initialState.rootFeatureSets[o.id]:void 0))}this._rootFeatureSets=new a.WorksheetFeatureSetCollection(i);for(var s=0,h=this.rootFeatureSets.models;s<h.length;s++){var c=h[s],u=this.__getSelectedFeature(c);if(u){this._selectedFeature=u;break}}if(!this._selectedFeature)for(var d=0,f=this.rootFeatureSets.models;d<f.length;d++){var c=f[d],u=this.__getFirstFeature(c);if(u){this._selectedFeature=u,u.selected=!0;break}}if(!this._selectedFeature)throw new Error("should never happen")}return n(t,e),Object.defineProperty(t.prototype,"accessionNumber",{get:function(){return this._accessionNumber},enumerable:!0,configurable:!0}),t.fetchFromService=function(e){var i=s.Services.instance.worksheetQueryService.getWorksheetDefinitionSync(),n=s.Services.instance.worksheetQueryService.getWorksheetStateSync({accessionNumber:e.accessionNumber});return new t({accessionNumber:e.accessionNumber,definition:i,initialState:n})},Object.defineProperty(t.prototype,"currentState",{get:function(){for(var e={},t=0,i=this.rootFeatureSets.models;t<i.length;t++){var n=i[t],o=n.currentState;o&&(e[n.id]=o)}return r.isEmpty(e)?void 0:new h.WorksheetState({accessionNumber:this.accessionNumber,rootFeatureSets:e})},enumerable:!0,configurable:!0}),t.prototype.putToService=function(){var e=this.currentState;e&&s.Services.instance.worksheetCommandService.putWorksheetStateSync({state:e})},Object.defineProperty(t.prototype,"rootFeatureSets",{get:function(){return this._rootFeatureSets},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedFeature",{get:function(){return this._selectedFeature},set:function(e){this._selectedFeature=e},enumerable:!0,configurable:!0}),t.prototype.__getSelectedFeature=function(e){if(e.features)for(var t=0,i=e.features.models;t<i.length;t++){var n=i[t];if(n.selected)return n}if(e.childFeatureSets)for(var r=0,o=e.childFeatureSets.models;r<o.length;r++){var s=o[r],a=this.__getSelectedFeature(s);if(a)return a}},t.prototype.__getFirstFeature=function(e){if(e.features&&e.features.length>0)return e.features.at(1);if(e.childFeatureSets)for(var t=0,i=e.childFeatureSets.models;t<i.length;t++){var n=i[t],r=this.__getFirstFeature(n);if(r)return r}},t}(o.Model);t.Worksheet=c},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(4),o=function(e){function t(t){e.call(this,t)}return n(t,e),t}(r.Collection);t.WorksheetFeatureSetCollection=o},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(3),o=i(4),s=i(35),a=i(42),l=i(46),h=i(40),c=i(47),u=function(e){function t(i,n){if(e.call(this,{id:i.id}),this._childFeatureSets=new h.WorksheetFeatureSetCollection([]),this._features=new l.WorksheetFeatureCollection([]),this._definition=i,i.childFeatureSets)for(var r=0,o=i.childFeatureSets.models;r<o.length;r++){var s=o[r];this._childFeatureSets.add(new t(s,n&&n.childFeatureSets?n.childFeatureSets[s.id]:void 0))}if(i.features)for(var u=0,d=i.features.models;u<d.length;u++){var f=d[u],p=n&&n.features?n.features[f.id]:void 0;if(f.enum_)this._features.add(new a.WorksheetEnumFeature(f,p));else{if(!f.text)throw new Error("feature definition without union set");this._features.add(new c.WorksheetTextFeature(f,p))}}}return n(t,e),Object.defineProperty(t.prototype,"currentState",{get:function(){if(this.definition.childFeatureSets||this.definition.features){var e=new s.WorksheetFeatureSetState,t=!1;if(this.definition.childFeatureSets){for(var i={},n=0,o=this._childFeatureSets.models;n<o.length;n++){var a=o[n],l=a.currentState;l&&(i[a.id]=l)}r.isEmpty(i)||(e.childFeatureSets=i,t=!0)}if(this.definition.features){for(var h={},c=0,u=this._features.models;c<u.length;c++){var d=u[c],f=d.currentState;f&&(h[d.id]=f)}r.isEmpty(h)||(e.features=h,t=!0)}return t?e:void 0}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childFeatureSets",{get:function(){return this._childFeatureSets},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return this._definition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayName",{get:function(){return this._definition.displayName?this._definition.displayName:this._definition.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"features",{get:function(){return this._features},enumerable:!0,configurable:!0}),t}(o.Model);t.WorksheetFeatureSet=u},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(37),o=i(43),s=i(36),a=i(44),l=i(45),h=function(e){function t(t,i){e.call(this,t,i);for(var n=[],r=0,o=t.enum_.values_.models;r<o.length;r++){var s=o[r],h=new l.WorksheetEnumFeatureValue(s,this,!(!i||!i.enum_)&&i.enum_.selectedValues.indexOf(s.id)!=-1);n.push(h)}this._values=new a.WorksheetEnumFeatureValueCollection(n)}return n(t,e),Object.defineProperty(t.prototype,"currentState",{get:function(){for(var e=[],t=0,i=this.values_.models;t<i.length;t++){var n=i[t];n.selected&&e.push(n.id)}return e.length>0?new s.WorksheetFeatureState({enum_:new r.WorksheetEnumFeatureState({selectedValues:e})}):void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputValues",{get:function(){for(var e=[],t=0,i=this._values.models;t<i.length;t++){var n=i[t];n.selected&&(n.definition.displayName?e.push(n.definition.displayName):e.push(n.definition.id))}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"values_",{get:function(){return this._values},enumerable:!0,configurable:!0}),t}(o.WorksheetFeature);t.WorksheetEnumFeature=h},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(4),o=function(e){function t(t,i){e.call(this,{id:t.id}),this._definition=t,this.selected=!1}return n(t,e),Object.defineProperty(t.prototype,"currentState",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return this._definition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayName",{get:function(){return this._definition.displayName?this._definition.displayName:this._definition.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this.get("selected")},set:function(e){this.set("selected",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputValues",{get:function(){},enumerable:!0,configurable:!0}),t}(r.Model);t.WorksheetFeature=o},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(4),o=function(e){function t(){e.apply(this,arguments)}return n(t,e),t}(r.Collection);t.WorksheetEnumFeatureValueCollection=o},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(4),o=function(e){function t(t,i,n){e.call(this,{id:t.id}),this._definition=t,this._parentFeature=i,this.selected=n}return n(t,e),Object.defineProperty(t.prototype,"definition",{get:function(){return this._definition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayName",{get:function(){return this._definition.displayName?this._definition.displayName:this._definition.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentFeature",{get:function(){return this._parentFeature},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this.get("selected")},set:function(e){this.set("selected",e)},enumerable:!0,configurable:!0}),t}(r.Model);t.WorksheetEnumFeatureValue=o},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(4),o=function(e){function t(){e.apply(this,arguments)}return n(t,e),t}(r.Collection);t.WorksheetFeatureCollection=o},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(43),o=i(36),s=i(38),a=function(e){function t(t,i){e.call(this,t,i),i&&i.text&&i.text.text&&this.set("text",i.text.text)}return n(t,e),Object.defineProperty(t.prototype,"currentState",{get:function(){var e=this.text;return e?new o.WorksheetFeatureState({text:new s.WorksheetTextFeatureState({text:e})}):void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputValues",{get:function(){var e=this.text;return e?[e]:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.get("text")},enumerable:!0,configurable:!0}),t}(r.WorksheetFeature);t.WorksheetTextFeature=a},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(3),o=i(1),s=i(4),a=i(5);i(49);var l=function(e){function t(t){e.call(this,{events:{"click #footer-close-button":"onCloseButtonClick","click #header-close-button":"onCloseButtonClick","click #footer-ok-button":"onOkButtonClick","keyup #newAccessionNumberInput":"onNewAccessionNumberInputKeyup"},model:new s.Model,template:r.template(i(51))}),this._availableAccessionNumbers=t.availableAccessionNumbers}return n(t,e),t.prototype.initialize=function(){this.ui={accessionNumberSelect:"#accessionNumberSelect",alert:"#alert",newAccessionNumberInput:"#newAccessionNumberInput"}},t.prototype.onCloseButtonClick=function(){o.Application.instance.modalRegion.empty(),o.Application.instance.router.navigate("",{trigger:!0})},t.prototype.onOkButtonClick=function(){var e=this.ui.accessionNumberSelect.val();if(!e&&(e=this.ui.newAccessionNumberInput.val(),!e||0==e.length)){var t=this.ui.alert;return void t.fadeTo(1e3,500).slideUp(500,function(){t.slideUp(500)})}o.Application.instance.modalRegion.empty(),o.Application.instance.router.navigate("worksheet/"+e,{trigger:!0})},t.prototype.onNewAccessionNumberInputKeyup=function(e){13==e.keyCode&&this.onOkButtonClick()},t.prototype.onShow=function(){this.ui.accessionNumberSelect.selectpicker("show"),o.Application.instance.modalRegion.$el.on("shown.bs.modal",{view:this},function(e){e.data.view.ui.newAccessionNumberInput.focus&&e.data.view.ui.newAccessionNumberInput.focus()})},t.prototype.serializeData=function(){return{availableAccessionNumbers:this._availableAccessionNumbers}},t}(a.ItemView);t.WorksheetAccessionNumberPickerView=l},function(e,t){},,function(e,t){e.exports='<div class="modal-dialog" role="document" id="worksheet-accession-number-picker">\r\n    <div class="modal-content">\r\n        <div class="modal-header">\r\n            <button type="button" class="close" aria-label="Close" id="header-close-button"><span aria-hidden="true">&times;</span></button>\r\n            <h4 class="modal-title">Worksheet</h4>\r\n        </div>\r\n        <div class="modal-body">\r\n            <% if (availableAccessionNumbers.length > 0) { %>\r\n                <select class="selectpicker show-menu-arrow show-tick" data-width="auto" id="accessionNumberSelect" title="Choose an existing worksheet">\r\n                    <% for (var i = 0; i < availableAccessionNumbers.length; i++) { %>\r\n                        <option value="<%= availableAccessionNumbers[i] %>"><%- availableAccessionNumbers[i] %></option>\r\n                    <% } %>\r\n                </select>\r\n                <br /><br />\r\n            <% } %>\r\n            <div>\r\n                <div>\r\n                    <% if (availableAccessionNumbers.length > 0) { %>\r\n                    Or enter a new accession number:\r\n                    <% } else { %>\r\n                    Enter a new accession number:\r\n                    <% } %>\r\n                </div>\r\n                <input id="newAccessionNumberInput" placeholder="New accession number" size="26" type="text" />\r\n            </div>\r\n            <br/>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-default" id="footer-close-button">Cancel</button>\r\n                <button type="button" class="btn btn-primary" id="footer-ok-button">OK</button>\r\n            </div>\r\n            <div class="alert alert-warning" hidden="hidden" id="alert" role="alert">\r\n                <strong>Please select or enter an accession number</strong>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(1),o=i(18),s=i(53),a=i(54),l=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.initialize=function(){this.listenTo(r.Application.instance.radio.globalChannel,s.WorksheetFeatureInputEvent.NAME,this.onFeatureInput)},t.prototype.onFeatureInput=function(e){this.model.putToService()},t.prototype.onRender=function(){e.prototype.onRender.call(this),this.showChildView("content",new a.WorksheetTwoColumnView({model:this.model}))},t}(o.TopLevelView);t.WorksheetTopLevelView=l},function(e,t){"use strict";var i=function(){function e(e){this._feature=e.feature}return Object.defineProperty(e.prototype,"feature",{get:function(){return this._feature},enumerable:!0,configurable:!0}),e.NAME="worksheet:feature:input",e}();t.WorksheetFeatureInputEvent=i},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(3),o=i(1),s=i(5),a=i(55),l=i(56),h=i(67),c=function(e){function t(t){e.call(this,r.extend(t,{regions:{leftColumn:"#left-column",rightColumn:"#right-column"},template:r.template(i(72))}))}return n(t,e),t.prototype.initialize=function(){this.listenTo(o.Application.instance.radio.globalChannel,a.WorksheetFeatureNavigationEvent.NAME,this.onFeatureNavigation)},t.prototype.onFeatureNavigation=function(e){this.model.selectedFeature.selected=!1,this.model.selectedFeature=e.feature;var t=this.getRegion("rightColumn");t.reset(),t.show(l.WorksheetInputView.create(e.feature))},t.prototype.onBeforeShow=function(){this.showChildView("leftColumn",new h.WorksheetSidebarView({model:this.model})),this.showChildView("rightColumn",l.WorksheetInputView.create(this.model.selectedFeature))},t}(s.LayoutView);t.WorksheetTwoColumnView=c},function(e,t){"use strict";var i=function(){function e(e){this._feature=e.feature}return Object.defineProperty(e.prototype,"feature",{get:function(){return this._feature},enumerable:!0,configurable:!0}),e.NAME="worksheet:feature:navigation",e}();t.WorksheetFeatureNavigationEvent=i},function(e,t,i){"use strict";var n=i(57),r=i(42),o=i(64),s=i(47),a=function(){function e(){}return e.create=function(e){if(e instanceof r.WorksheetEnumFeature)return new n.WorksheetEnumFeatureInputView({model:e});if(e instanceof s.WorksheetTextFeature)return new o.WorksheetTextFeatureInputView({model:e});throw new Error("not supported "+e.constructor.name)},e}();t.WorksheetInputView=a},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(3),o=i(5),s=i(58),a=function(e){function t(t){e.call(this,r.extend(t,{regions:{values:"#values"},template:r.template(i(63))}))}return n(t,e),t.prototype.onRender=function(){this.showChildView("values",new s.WorksheetEnumFeatureValuesInputView({collection:this.model.values_}))},t.prototype.serializeData=function(){return{displayName:this.model.displayName}},t}(o.LayoutView);t.WorksheetEnumFeatureInputView=a},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(3),o=i(5),s=i(59),a=function(e){function t(t){e.call(this,r.extend(t,{childView:s.WorksheetEnumFeatureValueInputView}))}return n(t,e),t}(o.CollectionView);t.WorksheetEnumFeatureValuesInputView=a},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(3),o=i(1),s=i(5),a=i(53);i(60);var l=function(e){function t(t){e.call(this,r.extend(t,{events:{"click #feature-value-link":"onClick","click #feature-value-checkbox":"onClick"},template:r.template(i(62))}))}return n(t,e),t.prototype.initialize=function(){this.ui={checkbox:"#feature-value-checkbox"}},t.prototype.onClick=function(){this.model.selected=!this.model.selected,this.ui.checkbox[0].checked=this.model.selected,o.Application.instance.radio.globalChannel.trigger(a.WorksheetFeatureInputEvent.NAME,new a.WorksheetFeatureInputEvent({feature:this.model.parentFeature}))},t.prototype.serializeData=function(){var e=this.model.definition.toJSON();return e.displayName=this.model.displayName,e.image=this.model.definition.image?this.model.definition.image.toJSON():null,e},t.prototype.onRender=function(){this.ui.checkbox[0].checked=this.model.selected},t}(s.ItemView);t.WorksheetEnumFeatureValueInputView=l},function(e,t){},,function(e,t){e.exports='<div class="col-lg-3 col-md-4 col-xs-6 enum-feature-value">\n    <a id="feature-value-link">\n        <% if (image) { %>\n        <img class="img-responsive" src="<%- image.thumbnailUrl %>" alt="<%- displayName %>" title="<%- displayName %>">\n        <% } else { %>\n        <%- displayName %>\n        <% } %>\n    </a>\n    <input class="form-check-input" id="feature-value-checkbox" type="checkbox" value="" />&nbsp;<%- displayName %>\n</div>\n'},function(e,t){e.exports='<div class="row" id="input">\n    <div class="col-lg12">\n        <h3 class="page-header" style="text-align: center"><%- displayName %></h3>\n    </div>\n    <div id="values"></div>\n</div>\n'},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(3),o=i(1),s=i(5),a=i(53);i(65);var l=function(e){function t(t){e.call(this,r.extend(t,{template:r.template(i(66))})),this.bindings={"#text":"text"}}return n(t,e),t.prototype.initialize=function(){this.listenTo(this.model,"change:text",this.onTextChange)},t.prototype.onBeforeDestroy=function(){this.unstickit()},t.prototype.onRender=function(){this.stickit()},t.prototype.onTextChange=function(){o.Application.instance.radio.globalChannel.trigger(a.WorksheetFeatureInputEvent.NAME,new a.WorksheetFeatureInputEvent({feature:this.model}))},t.prototype.serializeData=function(){return{displayName:this.model.displayName}},t}(s.ItemView);t.WorksheetTextFeatureInputView=l},function(e,t,i){var n,r,o;!function(s){r=[i(3),i(4),t],n=s,o="function"==typeof n?n.apply(t,r):n,!(void 0!==o&&(e.exports=o))}(function(e,t,i){t.Stickit=i,i._handlers=[],i.addHandler=function(t){t=e.map(e.flatten([t]),function(t){return e.defaults({},t,{updateModel:!0,updateView:!0,updateMethod:"text"})}),this._handlers=this._handlers.concat(t)},i.ViewMixin={_modelBindings:null,unstickit:function(t,i){if(e.isObject(i))return void e.each(i,function(e,i){this.unstickit(t,i)},this);var n=[],r=[];this._modelBindings=e.reject(this._modelBindings,function(e){if(!(t&&e.model!==t||i&&e.config.selector!=i))return e.model.off(e.event,e.fn),r.push(e.config._destroy),n.push(e.model),!0}),e.invoke(e.uniq(n),"trigger","stickit:unstuck",this.cid),e.each(e.uniq(r),function(e){e.call(this)},this),this.$el.off(".stickit"+(t?"."+t.cid:""),i)},stickit:function(t,i){var n=t||this.model,r=i||e.result(this,"bindings")||{};this._modelBindings||(this._modelBindings=[]),this.addBinding(n,r);var o=this.remove;return o.stickitWrapped||(this.remove=function(){var e=this;return this.unstickit(),o&&(e=o.apply(this,arguments)),e}),this.remove.stickitWrapped=!0,this},addBinding:function(t,i,r){var g=t||this.model,v=".stickit."+g.cid;if(r=r||{},e.isObject(i)){var m=i;return void e.each(m,function(e,t){this.addBinding(g,t,e)},this)}var y=":el"===i?this.$el:this.$(i);if(this.unstickit(g,i),y.length){e.isString(r)&&(r={observe:r}),e.isFunction(r.observe)&&(r.observe=r.observe.call(this));var b=c(y,r),_=b.observe;b.selector=i,b.view=this;var w=b.bindId=e.uniqueId(),x=e.extend({stickitChange:b},b.setOptions);if(b._destroy=function(){o.call(this,b.destroy,y,g,b)},u(y,b,g,_),f(y,b,g,_),d(y,b,g,_),_){e.each(b.events,function(t){var r=t+v,a=function(e){var t=o.call(this,b.getVal,y,e,b,n.call(arguments,1)),i=s(b.updateModel,t,e,b);i&&l(g,_,t,x,b)},h=":el"===i?"":i;this.$el.on(r,h,e.bind(a,this))},this),e.each(e.flatten([_]),function(e){a(g,"change:"+e,b,function(e,t,i){var n=i&&i.stickitChange&&i.stickitChange.bindId;if(n!==w){var r=h(g,_,b);p(y,b,r,g)}})});var S=h(g,_,b);p(y,b,S,g,!0)}o.call(this,b.initialize,y,g,b)}}},e.extend(t.View.prototype,i.ViewMixin);var n=[].slice,r=function(t,i){var n=(i||"").split("."),r=e.reduce(n,function(e,t){return e[t]},t);return null==r?t:r},o=function(t){if(t=e.isString(t)?r(this,t):t)return t.apply(this,n.call(arguments,1))},s=function(t,i,n){if(e.isBoolean(t))return t;if(e.isFunction(t)||e.isString(t)){var r=e.last(arguments).view;return o.apply(r,arguments)}return!1},a=function(e,t,i,n){var r=i.view;e.on(t,n,r),r._modelBindings.push({model:e,event:t,fn:n,config:i})},l=function(t,i,n,r,s){var a={},l=s.view;s.onSet&&(n=o.call(l,s.onSet,n,s)),s.set?o.call(l,s.set,i,n,r,s):(a[i]=n,e.isArray(i)&&e.isArray(n)&&(a=e.reduce(i,function(t,i,r){return t[i]=e.has(n,r)?n[r]:null,t},{})),t.set(a,r))},h=function(t,i,n){var r=n.view,s=function(e){return t[n.escape?"escape":"get"](e)},a=function(e){return null==e?"":e},l=e.isArray(i)?e.map(i,s):s(i);return n.onGet&&(l=o.call(r,n.onGet,l,n)),e.isArray(l)?e.map(l,a):a(l)},c=i.getConfiguration=function(t,n){var r=[{updateModel:!1,updateMethod:"text",update:function(e,t,i,n){e[n.updateMethod]&&e[n.updateMethod](t)},getVal:function(e,t,i){return e[i.updateMethod]()}}];r=r.concat(e.filter(i._handlers,function(e){return t.is(e.selector)})),r.push(n);var o=e.extend.apply(e,r);return e.has(o,"updateView")||(o.updateView=!o.visible),o},u=function(t,i,n,r){var o=["autofocus","autoplay","async","checked","controls","defer","disabled","hidden","indeterminate","loop","multiple","open","readonly","required","scoped","selected"],s=i.view;e.each(i.attributes||[],function(l){l=e.clone(l),l.view=s;var c="",u=l.observe||(l.observe=r),d=function(){var i=e.contains(o,l.name)?"prop":"attr",r=h(n,u,l);"class"===l.name?(t.removeClass(c).addClass(r),c=r):t[i](l.name,r)};e.each(e.flatten([u]),function(e){a(n,"change:"+e,i,d)}),d()})},d=function(t,i,n,r){e.each(i.classes||[],function(r,o){e.isString(r)&&(r={observe:r}),r.view=i.view;var s=r.observe,l=function(){var e=h(n,s,r);t.toggleClass(o,!!e)};e.each(e.flatten([s]),function(e){a(n,"change:"+e,i,l)}),l()})},f=function(t,i,n,r){if(null!=i.visible){var s=i.view,l=function(){var a=i.visible,l=i.visibleFn,c=h(n,r,i),u=!!c;(e.isFunction(a)||e.isString(a))&&(u=!!o.call(s,a,c,i)),l?o.call(s,l,t,u,i):t.toggle(u)};e.each(e.flatten([r]),function(e){a(n,"change:"+e,i,l)}),l()}},p=function(e,t,i,n,r){var a=t.view;s(t.updateView,i,t)&&(o.call(a,t.update,e,i,n,t),r||o.call(a,t.afterUpdate,e,i,t))};return i.addHandler([{selector:"[contenteditable]",updateMethod:"html",events:["input","change"]},{selector:"input",events:["propertychange","input","change"],update:function(e,t){e.val(t)},getVal:function(e){return e.val()}},{selector:"textarea",events:["propertychange","input","change"],update:function(e,t){e.val(t)},getVal:function(e){return e.val()}},{selector:'input[type="radio"]',events:["change"],update:function(e,t){e.filter('[value="'+t+'"]').prop("checked",!0)},getVal:function(e){return e.filter(":checked").val()}},{selector:'input[type="checkbox"]',events:["change"],update:function(i,n,r,o){if(i.length>1)n||(n=[]),i.each(function(i,r){var o=t.$(r),s=e.contains(n,o.val());o.prop("checked",s)});else{var s=e.isBoolean(n)?n:n===i.val();i.prop("checked",s)}},getVal:function(i){var n;if(i.length>1)n=e.reduce(i,function(e,i){var n=t.$(i);return n.prop("checked")&&e.push(n.val()),e},[]);else{n=i.prop("checked");var r=i.val();"on"!==r&&null!=r&&(n=n?i.val():null)}return n}},{selector:"select",events:["change"],update:function(i,n,s,a){var l,c=a.selectOptions,u=c&&c.collection||void 0,d=i.prop("multiple");if(!c){c={};var f=function(e){return e.map(function(e,i){var n=t.$(i).data("stickit-bind-val");return{value:void 0!==n?n:i.value,label:i.text}}).get()};i.find("optgroup").length?(u={opt_labels:[]},i.find("> option").length&&(u.opt_labels.push(void 0),e.each(i.find("> option"),function(e){u[void 0]=f(t.$(e))})),e.each(i.find("optgroup"),function(e){var i=t.$(e).attr("label");u.opt_labels.push(i),u[i]=f(t.$(e).find("option"))})):u=f(i.find("option"))}c.valuePath=c.valuePath||"value",c.labelPath=c.labelPath||"label",c.disabledPath=c.disabledPath||"disabled";
var p=function(i,n,o){e.each(i,function(i){var s,a,l,h=t.$("<option/>"),u=i,f=function(t,i,n){h.text(t),u=i,h.data("stickit-bind-val",u),e.isArray(u)||e.isObject(u)||h.val(u),n===!0&&h.prop("disabled","disabled")};"__default__"===i?(s=o.label,a=o.value,l=o.disabled):(s=r(i,c.labelPath),a=r(i,c.valuePath),l=r(i,c.disabledPath)),f(s,a,l);var p=function(){return!d&&null!=u&&null!=o&&u===o||!(!e.isObject(o)||!e.isEqual(u,o))};p()?h.prop("selected",!0):d&&e.isArray(o)&&e.each(o,function(t){e.isObject(t)&&(t=r(t,c.valuePath)),(t===u||e.isObject(t)&&e.isEqual(u,t))&&h.prop("selected",!0)}),n.append(h)})};if(i.find("*").remove(),e.isString(u)){var g=window;0===u.indexOf("this.")&&(g=this),u=u.replace(/^[a-z]*\.(.+)$/,"$1"),l=r(g,u)}else l=e.isFunction(u)?o.call(this,u,i,a):u;if(l instanceof t.Collection){var v=l,m=function(){var e=h(s,a.observe,a);o.call(this,a.update,i,e,s,a)},y=function(){v.off("add remove reset sort",m)},b=function(){y(),v.off("stickit:selectRefresh"),s.off("stickit:selectRefresh")};v.trigger("stickit:selectRefresh"),v.once("stickit:selectRefresh",y,this),v.on("add remove reset sort",m,this),s.trigger("stickit:selectRefresh"),s.once("stickit:selectRefresh",function(){s.off("stickit:unstuck",b)}),s.once("stickit:unstuck",b,this),l=l.toJSON()}if(c.defaultOption){var _=e.isFunction(c.defaultOption)?c.defaultOption.call(this,i,a):c.defaultOption;p(["__default__"],i,_)}if(e.isArray(l))p(l,i,n);else if(l.opt_labels)e.each(l.opt_labels,function(e){var r=t.$("<optgroup/>").attr("label",e);p(l[e],r,n),i.append(r)});else{var w,x=[];for(var S in l)w={},w[c.valuePath]=S,w[c.labelPath]=l[S],x.push(w);x=e.sortBy(x,c.comparator||c.labelPath),p(x,i,n)}},getVal:function(i){var n=i.find("option:selected");return i.prop("multiple")?e.map(n,function(e){return t.$(e).data("stickit-bind-val")}):n.data("stickit-bind-val")}}]),i})},function(e,t){e.exports='<div class="row" id="input">\n    <div class="col-lg12">\n        <h3 class="page-header" style="text-align: center"><%- displayName %></h3>\n    </div>\n    <form class="form-horizontal">\n        <div class="form-group">\n            <label for="text" class="col-sm-offset-2 col-sm-2 control-label">Text:</label>\n            <div class="col-sm-6 ">\n                <input type="text" class="form-control" id="text" placeholder="Text">\n            </div>\n        </div>\n    </form>\n</div>\n'},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(3),o=i(5),s=i(68),a=i(69),l=function(e){function t(t){e.call(this,r.extend(t,{regions:{navigation:"#navigation",output:"#output"},template:r.template(i(71))}))}return n(t,e),t.prototype.onBeforeShow=function(){this.showChildView("navigation",new s.WorksheetNavigationView({model:this.model})),this.showChildView("output",new a.WorksheetOutputView({model:this.model}))},t.prototype.serializeData=function(){return{accessionNumber:this.model.accessionNumber}},t}(o.LayoutView);t.WorksheetSidebarView=l},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(3),o=i(1),s=i(5),a=i(53),l=i(55),h=function(e){function t(t){if(e.call(this,r.extend(t,{template:r.template("")})),this._tree=[],this._nodeId=0,this._featureCidToNodeIdMap={},this.model.rootFeatureSets)for(var i=0,n=this.model.rootFeatureSets.models;i<n.length;i++){var o=n[i];this._tree.push(this.__constructFeatureSetTree(o))}}return n(t,e),t.prototype.initialize=function(){this.listenTo(o.Application.instance.radio.globalChannel,a.WorksheetFeatureInputEvent.NAME,this.onFeatureInput)},t.prototype.onFeatureInput=function(e){var t=this.$el.treeview(!0),i=this._featureCidToNodeIdMap[e.feature.cid],n=t.getNode(i);if(n.feature.id!=e.feature.id)throw new Error("map mismatch");e.feature.currentState?(console.info("Check "+e.feature.id),n.icon="glyphicon glyphicon-check"):(console.info("Uncheck "+e.feature.id),delete n.icon),t.selectNode(i)},t.prototype.onNodeSelected=function(e,t){return!t.feature||(o.Application.instance.radio.globalChannel.trigger(l.WorksheetFeatureNavigationEvent.NAME,new l.WorksheetFeatureNavigationEvent({feature:t.feature})),!0)},t.prototype.__constructFeatureSetTree=function(e){var t={ddId:this._nodeId++,text:e.displayName},i=[];if(e.childFeatureSets)for(var n=0,r=e.childFeatureSets.models;n<r.length;n++){var o=r[n];i.push(this.__constructFeatureSetTree(o))}if(e.features)for(var s=0,a=e.features.models;s<a.length;s++){var l=a[s],h={feature:l,ddId:this._nodeId++,icon:l.currentState?"glyphicon glyphicon-check":void 0,text:l.displayName,state:{selected:l.selected}};this._featureCidToNodeIdMap[l.cid]=h.ddId,i.push(h)}return i.length>0&&(t.nodes=i),t},t.prototype.onBeforeShow=function(){this.$el.treeview({data:this._tree,levels:10,onNodeSelected:this.onNodeSelected})},t}(s.ItemView);t.WorksheetNavigationView=h},function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(3),o=i(1),s=i(5),a=i(53),l=function(e){function t(t){e.call(this,r.extend(t,{template:r.template(i(70))}))}return n(t,e),t.prototype.initialize=function(){this.listenTo(o.Application.instance.radio.globalChannel,a.WorksheetFeatureInputEvent.NAME,this.onFeatureInput)},t.prototype.onFeatureInput=function(e){this.render()},t.prototype.serializeData=function(){var e=this.__calculateOutput();return r.isEmpty(e)?{output:void 0}:{output:e}},t.prototype.__calculateOutput=function(){for(var e={},t=0,i=this.model.rootFeatureSets.models;t<i.length;t++){var n=i[t];r.extend(e,this.__calculateFeatureSetOutput(n))}return console.info("output: "+JSON.stringify(e)),e},t.prototype.__calculateFeatureSetOutput=function(e){for(var t={},i=0,n=e.childFeatureSets.models;i<n.length;i++){var o=n[i],s=this.__calculateFeatureSetOutput(o);t=r.extend(t,s)}for(var a=0,l=e.features.models;a<l.length;a++){var h=l[a],s=this.__calculateFeatureOutput(h);t=r.extend(t,s)}return t},t.prototype.__calculateFeatureOutput=function(e){var t=e.outputValues;if(0==t.length)return{};var i={};return i[e.displayName]=t,i},t}(s.ItemView);t.WorksheetOutputView=l},function(e,t){e.exports='<% if (output) { %>\r\n    <% for (var name in output) { _.each(output[name], function(value) { %>\r\n    <div class="row">\r\n        <div class="col-md-4" id="feature-name"><%- name %></div>\r\n        <div class="col-md-8" id="feature-value"><%- value %></div>\r\n    </div>\r\n    <% }); } %>\r\n<% } else { %>\r\nSelect values on the right to generate a description.\r\n<% } %>\r\n'},function(e,t){e.exports='<div class="panel-group" role="tablist" aria-multiselectable="true">\r\n    <div class="panel panel-default">\r\n        <div class="panel-heading" role="tab" id="headingOne">\r\n            <h4 class="panel-title">\r\n                <a role="button" data-toggle="collapse" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">\r\n                    Accession number: <%- accessionNumber %>\r\n                </a>\r\n            </h4>\r\n        </div>\r\n        <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">\r\n            <div class="panel-body" id="output">\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="panel panel-default">\r\n        <div class="panel-heading" role="tab" id="headingTwo">\r\n            <h4 class="panel-title">\r\n                <a class="collapsed" role="button" data-toggle="collapse" href="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">\r\n                    Features\r\n                </a>\r\n            </h4>\r\n        </div>\r\n        <div id="collapseTwo" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingTwo">\r\n            <div class="panel-body" id="navigation">\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},function(e,t){e.exports='<div class="container-fluid" id="worksheet" style="height: 100%">\n    <div class="row" style="height: 100%">\n        <div class="col-md-4" id="left-column" style="height: 100%"></div>\n        <div class="col-md-8" id="right-column"></div>\n    </div>\n</div>\n'},function(e,t,i){(function(e){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=i(5),o=function(t){function i(){t.call(this,{el:"#modal"}),this._ensureElement()}return n(i,t),i.prototype.getEl=function(t){var i=e(t);return i.on("hidden.bs.modal",this.empty),i},i.prototype.onEmpty=function(){this.$el.modal("hide")},i.prototype.onShow=function(){this.$el.on("hidden.bs.modal",{region:this},function(e){e.data.region.empty()}),this.$el.modal("show")},i}(r.Region);t.ModalRegion=o}).call(t,i(2))},function(e,t,i){(function(e){Backbone.Validation=function(e){"use strict";var t={forceUpdate:!1,selector:"name",labelFormatter:"sentenceCase",valid:Function.prototype,invalid:Function.prototype},i={formatLabel:function(e,i){return l[t.labelFormatter](e,i)},format:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();return t.replace(/\{(\d+)\}/g,function(t,i){return"undefined"!=typeof e[i]?e[i]:t})}},n=function(t,i,r){return i=i||{},r=r||"",e.each(t,function(e,o){t.hasOwnProperty(o)&&(!e||"object"!=typeof e||e instanceof Date||e instanceof RegExp?i[r+o]=e:n(e,i,r+o+"."))}),i},r=function(){var r=function(t){return e.reduce(e.keys(t.validation||{}),function(e,t){return e[t]=void 0,e},{})},s=function(t,i){var n=t.validation?t.validation[i]||{}:{};return(e.isFunction(n)||e.isString(n))&&(n={fn:n}),e.isArray(n)||(n=[n]),e.reduce(n,function(t,i){return e.each(e.without(e.keys(i),"msg"),function(e){t.push({fn:h[e],val:i[e],msg:i.msg})}),t},[])},a=function(t,n,r,o){return e.reduce(s(t,n),function(s,a){var l=e.extend({},i,h),c=a.fn.call(l,r,n,a.val,t,o);return c!==!1&&s!==!1&&(c&&!s?a.msg||c:s)},"")},l=function(t,i){var r,o={},s=!0,l=e.clone(i),h=n(i);return e.each(h,function(e,i){r=a(t,i,e,l),r&&(o[i]=r,s=!1)}),{invalidAttrs:o,isValid:s}},c=function(t,i){return{preValidate:function(t,i){return a(this,t,i,e.extend({},this.attributes))},isValid:function(t){var i=n(this.attributes);return e.isString(t)?!a(this,t,i[t],e.extend({},this.attributes)):e.isArray(t)?e.reduce(t,function(t,n){return t&&!a(this,n,i[n],e.extend({},this.attributes))},!0,this):(t===!0&&this.validate(),!this.validation||this._isValid)},validate:function(o,s){var a=this,h=!o,c=e.extend({},i,s),u=r(a),d=e.extend({},u,a.attributes,o),f=n(o||d),p=l(a,d);if(a._isValid=p.isValid,e.each(u,function(e,i){var n=p.invalidAttrs.hasOwnProperty(i);n||c.valid(t,i,c.selector)}),e.each(u,function(e,i){var n=p.invalidAttrs.hasOwnProperty(i),r=f.hasOwnProperty(i);n&&(r||h)&&c.invalid(t,i,p.invalidAttrs[i],c.selector)}),e.defer(function(){a.trigger("validated",a._isValid,a,p.invalidAttrs),a.trigger("validated:"+(a._isValid?"valid":"invalid"),a,p.invalidAttrs)}),!c.forceUpdate&&e.intersection(e.keys(p.invalidAttrs),e.keys(f)).length>0)return p.invalidAttrs}}},u=function(t,i,n){e.extend(i,c(t,n))},d=function(e){delete e.validate,delete e.preValidate,delete e.isValid},f=function(e){u(this.view,e,this.options)},p=function(e){d(e)};return{version:"0.7.1",configure:function(i){e.extend(t,i)},bind:function(i,n){var r=i.model,s=i.collection;if(n=e.extend({},t,o,n),"undefined"==typeof r&&"undefined"==typeof s)throw"Before you execute the binding your view must have a model or a collection.\nSee http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information.";r?u(i,r,n):s&&(s.each(function(e){u(i,e,n)}),s.bind("add",f,{view:i,options:n}),s.bind("remove",p))},unbind:function(e){var t=e.model,i=e.collection;t&&d(e.model),i&&(i.each(function(e){d(e)}),i.unbind("add",f),i.unbind("remove",p))},mixin:c(null,t)}}(),o=r.callbacks={valid:function(e,t,i){e.$("["+i+'~="'+t+'"]').removeClass("invalid").removeAttr("data-error")},invalid:function(e,t,i,n){e.$("["+n+'~="'+t+'"]').addClass("invalid").attr("data-error",i)}},s=r.patterns={digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},a=r.messages={required:"{0} is required",acceptance:"{0} must be accepted",min:"{0} must be greater than or equal to {1}",max:"{0} must be less than or equal to {1}",range:"{0} must be between {1} and {2}",length:"{0} must be {1} characters",minLength:"{0} must be at least {1} characters",maxLength:"{0} must be at most {1} characters",rangeLength:"{0} must be between {1} and {2} characters",oneOf:"{0} must be one of: {1}",equalTo:"{0} must be the same as {1}",pattern:"{0} must be a valid {1}"},l=r.labelFormatters={none:function(e){return e},sentenceCase:function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0===t?e.toUpperCase():" "+e.toLowerCase()}).replace("_"," ")},label:function(e,t){return t.labels&&t.labels[e]||l.sentenceCase(e,t)}},h=r.validators=function(){var t=String.prototype.trim?function(e){return null===e?"":String.prototype.trim.call(e)}:function(e){var t=/^\s+/,i=/\s+$/;return null===e?"":e.toString().replace(t,"").replace(i,"")},i=function(t){return e.isNumber(t)||e.isString(t)&&t.match(s.number)},n=function(i){return!(e.isNull(i)||e.isUndefined(i)||e.isString(i)&&""===t(i))};return{fn:function(t,i,n,r,o){return e.isString(n)&&(n=r[n]),n.call(r,t,i,o)},required:function(t,i,r,o,s){var l=e.isFunction(r)?r.call(o,t,i,s):r;return!(!l&&!n(t))&&(l&&!n(t)?this.format(a.required,this.formatLabel(i,o)):void 0)},acceptance:function(t,i,n,r){if("true"!==t&&(!e.isBoolean(t)||t===!1))return this.format(a.acceptance,this.formatLabel(i,r))},min:function(e,t,n,r){if(!i(e)||e<n)return this.format(a.min,this.formatLabel(t,r),n)},max:function(e,t,n,r){if(!i(e)||e>n)return this.format(a.max,this.formatLabel(t,r),n)},range:function(e,t,n,r){if(!i(e)||e<n[0]||e>n[1])return this.format(a.range,this.formatLabel(t,r),n[0],n[1])},length:function(e,i,r,o){if(!n(e)||t(e).length!==r)return this.format(a.length,this.formatLabel(i,o),r)},minLength:function(e,i,r,o){if(!n(e)||t(e).length<r)return this.format(a.minLength,this.formatLabel(i,o),r)},maxLength:function(e,i,r,o){if(!n(e)||t(e).length>r)return this.format(a.maxLength,this.formatLabel(i,o),r)},rangeLength:function(e,i,r,o){if(!n(e)||t(e).length<r[0]||t(e).length>r[1])return this.format(a.rangeLength,this.formatLabel(i,o),r[0],r[1])},oneOf:function(t,i,n,r){if(!e.include(n,t))return this.format(a.oneOf,this.formatLabel(i,r),n.join(", "))},equalTo:function(e,t,i,n,r){if(e!==r[i])return this.format(a.equalTo,this.formatLabel(t,n),this.formatLabel(i,n))},pattern:function(e,t,i,r){if(!n(e)||!e.toString().match(s[i]||i))return this.format(a.pattern,this.formatLabel(t,r),i)}}}();return r}(e)}).call(t,i(3))},function(e,t){},,function(e,t,i){var n,r;!function(o,s){n=[i(2)],r=function(e){return s(e)}.apply(t,n),!(void 0!==r&&(e.exports=r))}(this,function(e){!function(e){"use strict";function t(t){var i=[{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}];return e.each(i,function(){t=t?t.replace(this.re,this.ch):""}),t}function i(t){var i=arguments,n=t;[].shift.apply(i);var r,o=this.each(function(){var t=e(this);if(t.is("select")){var o=t.data("selectpicker"),s="object"==typeof n&&n;if(o){if(s)for(var a in s)s.hasOwnProperty(a)&&(o.options[a]=s[a])}else{var l=e.extend({},c.DEFAULTS,e.fn.selectpicker.defaults||{},t.data(),s);l.template=e.extend({},c.DEFAULTS.template,e.fn.selectpicker.defaults?e.fn.selectpicker.defaults.template:{},t.data().template,s.template),t.data("selectpicker",o=new c(this,l))}"string"==typeof n&&(r=o[n]instanceof Function?o[n].apply(o,i):o.options[n])}});return"undefined"!=typeof r?r:o}String.prototype.includes||!function(){var e={}.toString,t=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(e){}return i}(),i="".indexOf,n=function(t){if(null==this)throw new TypeError;var n=String(this);if(t&&"[object RegExp]"==e.call(t))throw new TypeError;var r=n.length,o=String(t),s=o.length,a=arguments.length>1?arguments[1]:void 0,l=a?Number(a):0;l!=l&&(l=0);var h=Math.min(Math.max(l,0),r);return!(s+h>r)&&i.call(n,o,l)!=-1};t?t(String.prototype,"includes",{value:n,configurable:!0,writable:!0}):String.prototype.includes=n}(),String.prototype.startsWith||!function(){var e=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(e){}return i}(),t={}.toString,i=function(e){if(null==this)throw new TypeError;var i=String(this);if(e&&"[object RegExp]"==t.call(e))throw new TypeError;var n=i.length,r=String(e),o=r.length,s=arguments.length>1?arguments[1]:void 0,a=s?Number(s):0;a!=a&&(a=0);var l=Math.min(Math.max(a,0),n);if(o+l>n)return!1;for(var h=-1;++h<o;)if(i.charCodeAt(l+h)!=r.charCodeAt(h))return!1;return!0};e?e(String.prototype,"startsWith",{value:i,configurable:!0,writable:!0}):String.prototype.startsWith=i}(),Object.keys||(Object.keys=function(e,t,i){i=[];for(t in e)i.hasOwnProperty.call(e,t)&&i.push(t);return i});var n={useDefault:!1,_set:e.valHooks.select.set};e.valHooks.select.set=function(t,i){return i&&!n.useDefault&&e(t).data("selected",!0),n._set.apply(this,arguments)};var r=null;e.fn.triggerNative=function(e){var t,i=this[0];i.dispatchEvent?("function"==typeof Event?t=new Event(e,{bubbles:!0}):(t=document.createEvent("Event"),t.initEvent(e,!0,!1)),i.dispatchEvent(t)):i.fireEvent?(t=document.createEventObject(),t.eventType=e,i.fireEvent("on"+e,t)):this.trigger(e)},e.expr.pseudos.icontains=function(t,i,n){var r=e(t),o=(r.data("tokens")||r.text()).toString().toUpperCase();return o.includes(n[3].toUpperCase())},e.expr.pseudos.ibegins=function(t,i,n){var r=e(t),o=(r.data("tokens")||r.text()).toString().toUpperCase();return o.startsWith(n[3].toUpperCase())},e.expr.pseudos.aicontains=function(t,i,n){var r=e(t),o=(r.data("tokens")||r.data("normalizedText")||r.text()).toString().toUpperCase();return o.includes(n[3].toUpperCase())},e.expr.pseudos.aibegins=function(t,i,n){var r=e(t),o=(r.data("tokens")||r.data("normalizedText")||r.text()).toString().toUpperCase();return o.startsWith(n[3].toUpperCase())};var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},s={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'","&#x60;":"`"},a=function(e){var t=function(t){return e[t]},i="(?:"+Object.keys(e).join("|")+")",n=RegExp(i),r=RegExp(i,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(r,t):e}},l=a(o),h=a(s),c=function(t,i){n.useDefault||(e.valHooks.select.set=n._set,n.useDefault=!0),this.$element=e(t),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=i,null===this.options.title&&(this.options.title=this.$element.attr("title"));var r=this.options.windowPadding;"number"==typeof r&&(this.options.windowPadding=[r,r,r,r]),this.val=c.prototype.val,this.render=c.prototype.render,this.refresh=c.prototype.refresh,this.setStyle=c.prototype.setStyle,this.selectAll=c.prototype.selectAll,this.deselectAll=c.prototype.deselectAll,this.destroy=c.prototype.destroy,this.remove=c.prototype.remove,this.show=c.prototype.show,this.hide=c.prototype.hide,this.init()};c.VERSION="1.12.1",c.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(e,t){return 1==e?"{0} item selected":"{0} items selected"},maxOptionsText:function(e,t){return[1==e?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==t?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",showTick:!1,template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,windowPadding:0},c.prototype={constructor:c,init:function(){var t=this,i=this.$element.attr("id");this.$element.addClass("bs-select-hidden"),this.liObj={},this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement).appendTo(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(".dropdown-menu"),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),this.$element.removeClass("bs-select-hidden"),this.options.dropdownAlignRight===!0&&this.$menu.addClass("dropdown-menu-right"),"undefined"!=typeof i&&(this.$button.attr("data-id",i),e('label[for="'+i+'"]').click(function(e){e.preventDefault(),t.$button.focus()})),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(e){t.$menuInner.attr("aria-expanded",!1),t.$element.trigger("hide.bs.select",e)},"hidden.bs.dropdown":function(e){t.$element.trigger("hidden.bs.select",e)},"show.bs.dropdown":function(e){t.$menuInner.attr("aria-expanded",!0),t.$element.trigger("show.bs.select",e)},"shown.bs.dropdown":function(e){t.$element.trigger("shown.bs.select",e)}}),t.$element[0].hasAttribute("required")&&this.$element.on("invalid",function(){t.$button.addClass("bs-invalid").focus(),t.$element.on({"focus.bs.select":function(){t.$button.focus(),t.$element.off("focus.bs.select")},"shown.bs.select":function(){t.$element.val(t.$element.val()).off("shown.bs.select")},"rendered.bs.select":function(){this.validity.valid&&t.$button.removeClass("bs-invalid"),t.$element.off("rendered.bs.select")}})}),setTimeout(function(){t.$element.trigger("loaded.bs.select")})},createDropdown:function(){var t=this.multiple||this.options.showTick?" show-tick":"",i=this.$element.parent().hasClass("input-group")?" input-group-btn":"",n=this.autofocus?" autofocus":"",r=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",o=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+l(this.options.liveSearchPlaceholder)+'"')+' role="textbox" aria-label="Search"></div>':"",s=this.multiple&&this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn btn-default">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn btn-default">'+this.options.deselectAllText+"</button></div></div>":"",a=this.multiple&&this.options.doneButton?'<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm btn-default">'+this.options.doneButtonText+"</button></div></div>":"",h='<div class="btn-group bootstrap-select'+t+i+'"><button type="button" class="'+this.options.styleBase+' dropdown-toggle" data-toggle="dropdown"'+n+' role="button"><span class="filter-option pull-left"></span>&nbsp;<span class="bs-caret">'+this.options.template.caret+'</span></button><div class="dropdown-menu open" role="combobox">'+r+o+s+'<ul class="dropdown-menu inner" role="listbox" aria-expanded="false"></ul>'+a+"</div></div>";return e(h)},createView:function(){var e=this.createDropdown(),t=this.createLi();return e.find("ul")[0].innerHTML=t,e},reloadLi:function(){var e=this.createLi();this.$menuInner[0].innerHTML=e},createLi:function(){var i=this,n=[],r=0,o=document.createElement("option"),s=-1,a=function(e,t,i,n){return"<li"+("undefined"!=typeof i&""!==i?' class="'+i+'"':"")+("undefined"!=typeof t&null!==t?' data-original-index="'+t+'"':"")+("undefined"!=typeof n&null!==n?'data-optgroup="'+n+'"':"")+">"+e+"</li>"},h=function(n,r,o,s){return'<a tabindex="0"'+("undefined"!=typeof r?' class="'+r+'"':"")+(o?' style="'+o+'"':"")+(i.options.liveSearchNormalize?' data-normalized-text="'+t(l(e(n).html()))+'"':"")+("undefined"!=typeof s||null!==s?' data-tokens="'+s+'"':"")+' role="option">'+n+'<span class="'+i.options.iconBase+" "+i.options.tickIcon+' check-mark"></span></a>'};if(this.options.title&&!this.multiple&&(s--,!this.$element.find(".bs-title-option").length)){var c=this.$element[0];o.className="bs-title-option",o.innerHTML=this.options.title,o.value="",c.insertBefore(o,c.firstChild);var u=e(c.options[c.selectedIndex]);void 0===u.attr("selected")&&void 0===this.$element.data("selected")&&(o.selected=!0)}return this.$element.find("option").each(function(t){var o=e(this);if(s++,!o.hasClass("bs-title-option")){var c=this.className||"",u=this.style.cssText,d=o.data("content")?o.data("content"):o.html(),f=o.data("tokens")?o.data("tokens"):null,p="undefined"!=typeof o.data("subtext")?'<small class="text-muted">'+o.data("subtext")+"</small>":"",g="undefined"!=typeof o.data("icon")?'<span class="'+i.options.iconBase+" "+o.data("icon")+'"></span> ':"",v=o.parent(),m="OPTGROUP"===v[0].tagName,y=m&&v[0].disabled,b=this.disabled||y;if(""!==g&&b&&(g="<span>"+g+"</span>"),i.options.hideDisabled&&(b&&!m||y))return void s--;if(o.data("content")||(d=g+'<span class="text">'+d+p+"</span>"),m&&o.data("divider")!==!0){if(i.options.hideDisabled&&b){if(void 0===v.data("allOptionsDisabled")){var _=v.children();v.data("allOptionsDisabled",_.filter(":disabled").length===_.length)}if(v.data("allOptionsDisabled"))return void s--}var w=" "+v[0].className||"";if(0===o.index()){r+=1;var x=v[0].label,S="undefined"!=typeof v.data("subtext")?'<small class="text-muted">'+v.data("subtext")+"</small>":"",k=v.data("icon")?'<span class="'+i.options.iconBase+" "+v.data("icon")+'"></span> ':"";x=k+'<span class="text">'+l(x)+S+"</span>",0!==t&&n.length>0&&(s++,n.push(a("",null,"divider",r+"div"))),s++,n.push(a(x,null,"dropdown-header"+w,r))}if(i.options.hideDisabled&&b)return void s--;n.push(a(h(d,"opt "+c+w,u,f),t,"",r))}else if(o.data("divider")===!0)n.push(a("",t,"divider"));else if(o.data("hidden")===!0)n.push(a(h(d,c,u,f),t,"hidden is-hidden"));else{var C=this.previousElementSibling&&"OPTGROUP"===this.previousElementSibling.tagName;if(!C&&i.options.hideDisabled)for(var F=e(this).prevAll(),E=0;E<F.length;E++)if("OPTGROUP"===F[E].tagName){for(var O=0,N=0;N<E;N++){var $=F[N];($.disabled||e($).data("hidden")===!0)&&O++}O===E&&(C=!0);break}C&&(s++,n.push(a("",null,"divider",r+"div"))),n.push(a(h(d,c,u,f),t))}i.liObj[t]=s}}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),n.join("")},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(t){var i,n=this;t!==!1&&this.$element.find("option").each(function(e){var t=n.findLis().eq(n.liObj[e]);n.setDisabled(e,this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled,t),n.setSelected(e,this.selected,t)}),this.togglePlaceholder(),this.tabIndex();var r=this.$element.find("option").map(function(){if(this.selected){if(n.options.hideDisabled&&(this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled))return;var t,i=e(this),r=i.data("icon")&&n.options.showIcon?'<i class="'+n.options.iconBase+" "+i.data("icon")+'"></i> ':"";return t=n.options.showSubtext&&i.data("subtext")&&!n.multiple?' <small class="text-muted">'+i.data("subtext")+"</small>":"","undefined"!=typeof i.attr("title")?i.attr("title"):i.data("content")&&n.options.showContent?i.data("content").toString():r+i.html()+t}}).toArray(),o=this.multiple?r.join(this.options.multipleSeparator):r[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var s=this.options.selectedTextFormat.split(">");if(s.length>1&&r.length>s[1]||1==s.length&&r.length>=2){i=this.options.hideDisabled?", [disabled]":"";var a=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+i).length,l="function"==typeof this.options.countSelectedText?this.options.countSelectedText(r.length,a):this.options.countSelectedText;o=l.replace("{0}",r.length.toString()).replace("{1}",a.toString())}}void 0==this.options.title&&(this.options.title=this.$element.attr("title")),"static"==this.options.selectedTextFormat&&(o=this.options.title),o||(o="undefined"!=typeof this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",h(e.trim(o.replace(/<[^>]*>?/g,"")))),this.$button.children(".filter-option").html(o),this.$element.trigger("rendered.bs.select")},setStyle:function(e,t){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""));var i=e?e:this.options.style;"add"==t?this.$button.addClass(i):"remove"==t?this.$button.removeClass(i):(this.$button.removeClass(this.options.style),this.$button.addClass(i))},liHeight:function(t){if(t||this.options.size!==!1&&!this.sizeInfo){var i=document.createElement("div"),n=document.createElement("div"),r=document.createElement("ul"),o=document.createElement("li"),s=document.createElement("li"),a=document.createElement("a"),l=document.createElement("span"),h=this.options.header&&this.$menu.find(".popover-title").length>0?this.$menu.find(".popover-title")[0].cloneNode(!0):null,c=this.options.liveSearch?document.createElement("div"):null,u=this.options.actionsBox&&this.multiple&&this.$menu.find(".bs-actionsbox").length>0?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,d=this.options.doneButton&&this.multiple&&this.$menu.find(".bs-donebutton").length>0?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null;
if(l.className="text",i.className=this.$menu[0].parentNode.className+" open",n.className="dropdown-menu open",r.className="dropdown-menu inner",o.className="divider",l.appendChild(document.createTextNode("Inner text")),a.appendChild(l),s.appendChild(a),r.appendChild(s),r.appendChild(o),h&&n.appendChild(h),c){var f=document.createElement("span");c.className="bs-searchbox",f.className="form-control",c.appendChild(f),n.appendChild(c)}u&&n.appendChild(u),n.appendChild(r),d&&n.appendChild(d),i.appendChild(n),document.body.appendChild(i);var p=a.offsetHeight,g=h?h.offsetHeight:0,v=c?c.offsetHeight:0,m=u?u.offsetHeight:0,y=d?d.offsetHeight:0,b=e(o).outerHeight(!0),_="function"==typeof getComputedStyle&&getComputedStyle(n),w=_?null:e(n),x={vert:parseInt(_?_.paddingTop:w.css("paddingTop"))+parseInt(_?_.paddingBottom:w.css("paddingBottom"))+parseInt(_?_.borderTopWidth:w.css("borderTopWidth"))+parseInt(_?_.borderBottomWidth:w.css("borderBottomWidth")),horiz:parseInt(_?_.paddingLeft:w.css("paddingLeft"))+parseInt(_?_.paddingRight:w.css("paddingRight"))+parseInt(_?_.borderLeftWidth:w.css("borderLeftWidth"))+parseInt(_?_.borderRightWidth:w.css("borderRightWidth"))},S={vert:x.vert+parseInt(_?_.marginTop:w.css("marginTop"))+parseInt(_?_.marginBottom:w.css("marginBottom"))+2,horiz:x.horiz+parseInt(_?_.marginLeft:w.css("marginLeft"))+parseInt(_?_.marginRight:w.css("marginRight"))+2};document.body.removeChild(i),this.sizeInfo={liHeight:p,headerHeight:g,searchHeight:v,actionsHeight:m,doneButtonHeight:y,dividerHeight:b,menuPadding:x,menuExtras:S}}},setSize:function(){if(this.findLis(),this.liHeight(),this.options.header&&this.$menu.css("padding-top",0),this.options.size!==!1){var t,i,n,r,o,s,a,l,h=this,c=this.$menu,u=this.$menuInner,d=e(window),f=this.$newElement[0].offsetHeight,p=this.$newElement[0].offsetWidth,g=this.sizeInfo.liHeight,v=this.sizeInfo.headerHeight,m=this.sizeInfo.searchHeight,y=this.sizeInfo.actionsHeight,b=this.sizeInfo.doneButtonHeight,_=this.sizeInfo.dividerHeight,w=this.sizeInfo.menuPadding,x=this.sizeInfo.menuExtras,S=this.options.hideDisabled?".disabled":"",k=function(){var t,i=h.$newElement.offset(),n=e(h.options.container);h.options.container&&!n.is("body")?(t=n.offset(),t.top+=parseInt(n.css("borderTopWidth")),t.left+=parseInt(n.css("borderLeftWidth"))):t={top:0,left:0};var r=h.options.windowPadding;o=i.top-t.top-d.scrollTop(),s=d.height()-o-f-t.top-r[2],a=i.left-t.left-d.scrollLeft(),l=d.width()-a-p-t.left-r[1],o-=r[0],a-=r[3]};if(k(),"auto"===this.options.size){var C=function(){var d,f=function(t,i){return function(n){return i?n.classList?n.classList.contains(t):e(n).hasClass(t):!(n.classList?n.classList.contains(t):e(n).hasClass(t))}},_=h.$menuInner[0].getElementsByTagName("li"),S=Array.prototype.filter?Array.prototype.filter.call(_,f("hidden",!1)):h.$lis.not(".hidden"),C=Array.prototype.filter?Array.prototype.filter.call(S,f("dropdown-header",!0)):S.filter(".dropdown-header");k(),t=s-x.vert,i=l-x.horiz,h.options.container?(c.data("height")||c.data("height",c.height()),n=c.data("height"),c.data("width")||c.data("width",c.width()),r=c.data("width")):(n=c.height(),r=c.width()),h.options.dropupAuto&&h.$newElement.toggleClass("dropup",o>s&&t-x.vert<n),h.$newElement.hasClass("dropup")&&(t=o-x.vert),"auto"===h.options.dropdownAlignRight&&c.toggleClass("dropdown-menu-right",a>l&&i-x.horiz<r-p),d=S.length+C.length>3?3*g+x.vert-2:0,c.css({"max-height":t+"px",overflow:"hidden","min-height":d+v+m+y+b+"px"}),u.css({"max-height":t-v-m-y-b-w.vert+"px","overflow-y":"auto","min-height":Math.max(d-w.vert,0)+"px"})};C(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",C),d.off("resize.getSize scroll.getSize").on("resize.getSize scroll.getSize",C)}else if(this.options.size&&"auto"!=this.options.size&&this.$lis.not(S).length>this.options.size){var F=this.$lis.not(".divider").not(S).children().slice(0,this.options.size).last().parent().index(),E=this.$lis.slice(0,F+1).filter(".divider").length;t=g*this.options.size+E*_+w.vert,h.options.container?(c.data("height")||c.data("height",c.height()),n=c.data("height")):n=c.height(),h.options.dropupAuto&&this.$newElement.toggleClass("dropup",o>s&&t-x.vert<n),c.css({"max-height":t+v+m+y+b+"px",overflow:"hidden","min-height":""}),u.css({"max-height":t-w.vert+"px","overflow-y":"auto","min-height":""})}}},setWidth:function(){if("auto"===this.options.width){this.$menu.css("min-width","0");var e=this.$menu.parent().clone().appendTo("body"),t=this.options.container?this.$newElement.clone().appendTo("body"):e,i=e.children(".dropdown-menu").outerWidth(),n=t.css("width","auto").children("button").outerWidth();e.remove(),t.remove(),this.$newElement.css("width",Math.max(i,n)+"px")}else"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){this.$bsContainer=e('<div class="bs-container" />');var t,i,n,r=this,o=e(this.options.container),s=function(e){r.$bsContainer.addClass(e.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass("dropup",e.hasClass("dropup")),t=e.offset(),o.is("body")?i={top:0,left:0}:(i=o.offset(),i.top+=parseInt(o.css("borderTopWidth"))-o.scrollTop(),i.left+=parseInt(o.css("borderLeftWidth"))-o.scrollLeft()),n=e.hasClass("dropup")?0:e[0].offsetHeight,r.$bsContainer.css({top:t.top-i.top+n,left:t.left-i.left,width:e[0].offsetWidth})};this.$button.on("click",function(){var t=e(this);r.isDisabled()||(s(r.$newElement),r.$bsContainer.appendTo(r.options.container).toggleClass("open",!t.hasClass("open")).append(r.$menu))}),e(window).on("resize scroll",function(){s(r.$newElement)}),this.$element.on("hide.bs.select",function(){r.$menu.data("height",r.$menu.height()),r.$bsContainer.detach()})},setSelected:function(e,t,i){i||(this.togglePlaceholder(),i=this.findLis().eq(this.liObj[e])),i.toggleClass("selected",t).find("a").attr("aria-selected",t)},setDisabled:function(e,t,i){i||(i=this.findLis().eq(this.liObj[e])),t?i.addClass("disabled").children("a").attr("href","#").attr("tabindex",-1).attr("aria-disabled",!0):i.removeClass("disabled").children("a").removeAttr("href").attr("tabindex",0).attr("aria-disabled",!1)},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){var e=this;this.isDisabled()?(this.$newElement.addClass("disabled"),this.$button.addClass("disabled").attr("tabindex",-1).attr("aria-disabled",!0)):(this.$button.hasClass("disabled")&&(this.$newElement.removeClass("disabled"),this.$button.removeClass("disabled").attr("aria-disabled",!1)),this.$button.attr("tabindex")!=-1||this.$element.data("tabindex")||this.$button.removeAttr("tabindex")),this.$button.click(function(){return!e.isDisabled()})},togglePlaceholder:function(){var e=this.$element.val();this.$button.toggleClass("bs-placeholder",null===e||""===e||e.constructor===Array&&0===e.length)},tabIndex:function(){this.$element.data("tabindex")!==this.$element.attr("tabindex")&&this.$element.attr("tabindex")!==-98&&"-98"!==this.$element.attr("tabindex")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex"))),this.$element.attr("tabindex",-98)},clickListener:function(){var t=this,i=e(document);i.data("spaceSelect",!1),this.$button.on("keyup",function(e){/(32)/.test(e.keyCode.toString(10))&&i.data("spaceSelect")&&(e.preventDefault(),i.data("spaceSelect",!1))}),this.$button.on("click",function(){t.setSize()}),this.$element.on("shown.bs.select",function(){if(t.options.liveSearch||t.multiple){if(!t.multiple){var e=t.liObj[t.$element[0].selectedIndex];if("number"!=typeof e||t.options.size===!1)return;var i=t.$lis.eq(e)[0].offsetTop-t.$menuInner[0].offsetTop;i=i-t.$menuInner[0].offsetHeight/2+t.sizeInfo.liHeight/2,t.$menuInner[0].scrollTop=i}}else t.$menuInner.find(".selected a").focus()}),this.$menuInner.on("click","li a",function(i){var n=e(this),o=n.parent().data("originalIndex"),s=t.$element.val(),a=t.$element.prop("selectedIndex"),l=!0;if(t.multiple&&1!==t.options.maxOptions&&i.stopPropagation(),i.preventDefault(),!t.isDisabled()&&!n.parent().hasClass("disabled")){var h=t.$element.find("option"),c=h.eq(o),u=c.prop("selected"),d=c.parent("optgroup"),f=t.options.maxOptions,p=d.data("maxOptions")||!1;if(t.multiple){if(c.prop("selected",!u),t.setSelected(o,!u),n.blur(),f!==!1||p!==!1){var g=f<h.filter(":selected").length,v=p<d.find("option:selected").length;if(f&&g||p&&v)if(f&&1==f)h.prop("selected",!1),c.prop("selected",!0),t.$menuInner.find(".selected").removeClass("selected"),t.setSelected(o,!0);else if(p&&1==p){d.find("option:selected").prop("selected",!1),c.prop("selected",!0);var m=n.parent().data("optgroup");t.$menuInner.find('[data-optgroup="'+m+'"]').removeClass("selected"),t.setSelected(o,!0)}else{var y="string"==typeof t.options.maxOptionsText?[t.options.maxOptionsText,t.options.maxOptionsText]:t.options.maxOptionsText,b="function"==typeof y?y(f,p):y,_=b[0].replace("{n}",f),w=b[1].replace("{n}",p),x=e('<div class="notify"></div>');b[2]&&(_=_.replace("{var}",b[2][f>1?0:1]),w=w.replace("{var}",b[2][p>1?0:1])),c.prop("selected",!1),t.$menu.append(x),f&&g&&(x.append(e("<div>"+_+"</div>")),l=!1,t.$element.trigger("maxReached.bs.select")),p&&v&&(x.append(e("<div>"+w+"</div>")),l=!1,t.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){t.setSelected(o,!1)},10),x.delay(750).fadeOut(300,function(){e(this).remove()})}}}else h.prop("selected",!1),c.prop("selected",!0),t.$menuInner.find(".selected").removeClass("selected").find("a").attr("aria-selected",!1),t.setSelected(o,!0);!t.multiple||t.multiple&&1===t.options.maxOptions?t.$button.focus():t.options.liveSearch&&t.$searchbox.focus(),l&&(s!=t.$element.val()&&t.multiple||a!=t.$element.prop("selectedIndex")&&!t.multiple)&&(r=[o,c.prop("selected"),u],t.$element.triggerNative("change"))}}),this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(i){i.currentTarget==this&&(i.preventDefault(),i.stopPropagation(),t.options.liveSearch&&!e(i.target).hasClass("close")?t.$searchbox.focus():t.$button.focus())}),this.$menuInner.on("click",".divider, .dropdown-header",function(e){e.preventDefault(),e.stopPropagation(),t.options.liveSearch?t.$searchbox.focus():t.$button.focus()}),this.$menu.on("click",".popover-title .close",function(){t.$button.click()}),this.$searchbox.on("click",function(e){e.stopPropagation()}),this.$menu.on("click",".actions-btn",function(i){t.options.liveSearch?t.$searchbox.focus():t.$button.focus(),i.preventDefault(),i.stopPropagation(),e(this).hasClass("bs-select-all")?t.selectAll():t.deselectAll()}),this.$element.change(function(){t.render(!1),t.$element.trigger("changed.bs.select",r),r=null})},liveSearchListener:function(){var i=this,n=e('<li class="no-results"></li>');this.$button.on("click.dropdown.data-api",function(){i.$menuInner.find(".active").removeClass("active"),i.$searchbox.val()&&(i.$searchbox.val(""),i.$lis.not(".is-hidden").removeClass("hidden"),n.parent().length&&n.remove()),i.multiple||i.$menuInner.find(".selected").addClass("active"),setTimeout(function(){i.$searchbox.focus()},10)}),this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(e){e.stopPropagation()}),this.$searchbox.on("input propertychange",function(){if(i.$lis.not(".is-hidden").removeClass("hidden"),i.$lis.filter(".active").removeClass("active"),n.remove(),i.$searchbox.val()){var r,o=i.$lis.not(".is-hidden, .divider, .dropdown-header");if(r=i.options.liveSearchNormalize?o.not(":a"+i._searchStyle()+'("'+t(i.$searchbox.val())+'")'):o.not(":"+i._searchStyle()+'("'+i.$searchbox.val()+'")'),r.length===o.length)n.html(i.options.noneResultsText.replace("{0}",'"'+l(i.$searchbox.val())+'"')),i.$menuInner.append(n),i.$lis.addClass("hidden");else{r.addClass("hidden");var s,a=i.$lis.not(".hidden");a.each(function(t){var i=e(this);i.hasClass("divider")?void 0===s?i.addClass("hidden"):(s&&s.addClass("hidden"),s=i):i.hasClass("dropdown-header")&&a.eq(t+1).data("optgroup")!==i.data("optgroup")?i.addClass("hidden"):s=null}),s&&s.addClass("hidden"),o.not(".hidden").first().addClass("active")}}})},_searchStyle:function(){var e={begins:"ibegins",startsWith:"ibegins"};return e[this.options.liveSearchStyle]||"icontains"},val:function(e){return"undefined"!=typeof e?(this.$element.val(e),this.render(),this.$element):this.$element.val()},changeAll:function(t){if(this.multiple){"undefined"==typeof t&&(t=!0),this.findLis();var i=this.$element.find("option"),n=this.$lis.not(".divider, .dropdown-header, .disabled, .hidden"),r=n.length,o=[];if(t){if(n.filter(".selected").length===n.length)return}else if(0===n.filter(".selected").length)return;n.toggleClass("selected",t);for(var s=0;s<r;s++){var a=n[s].getAttribute("data-original-index");o[o.length]=i.eq(a)[0]}e(o).prop("selected",t),this.render(!1),this.togglePlaceholder(),this.$element.triggerNative("change")}},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},toggle:function(e){e=e||window.event,e&&e.stopPropagation(),this.$button.trigger("click")},keydown:function(i){var n,r,o,s,a,l,h,c,u,d=e(this),f=d.is("input")?d.parent().parent():d.parent(),p=f.data("this"),g=":not(.disabled, .hidden, .dropdown-header, .divider)",v={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(p.options.liveSearch&&(f=d.parent().parent()),p.options.container&&(f=p.$menu),n=e('[role="listbox"] li',f),u=p.$newElement.hasClass("open"),!u&&(i.keyCode>=48&&i.keyCode<=57||i.keyCode>=96&&i.keyCode<=105||i.keyCode>=65&&i.keyCode<=90))return p.options.container?p.$button.trigger("click"):(p.setSize(),p.$menu.parent().addClass("open"),u=!0),void p.$searchbox.focus();if(p.options.liveSearch&&(/(^9$|27)/.test(i.keyCode.toString(10))&&u&&(i.preventDefault(),i.stopPropagation(),p.$menuInner.click(),p.$button.focus()),n=e('[role="listbox"] li'+g,f),d.val()||/(38|40)/.test(i.keyCode.toString(10))||0===n.filter(".active").length&&(n=p.$menuInner.find("li"),n=p.options.liveSearchNormalize?n.filter(":a"+p._searchStyle()+"("+t(v[i.keyCode])+")"):n.filter(":"+p._searchStyle()+"("+v[i.keyCode]+")"))),n.length){if(/(38|40)/.test(i.keyCode.toString(10)))r=n.index(n.find("a").filter(":focus").parent()),s=n.filter(g).first().index(),a=n.filter(g).last().index(),o=n.eq(r).nextAll(g).eq(0).index(),l=n.eq(r).prevAll(g).eq(0).index(),h=n.eq(o).prevAll(g).eq(0).index(),p.options.liveSearch&&(n.each(function(t){e(this).hasClass("disabled")||e(this).data("index",t)}),r=n.index(n.filter(".active")),s=n.first().data("index"),a=n.last().data("index"),o=n.eq(r).nextAll().eq(0).data("index"),l=n.eq(r).prevAll().eq(0).data("index"),h=n.eq(o).prevAll().eq(0).data("index")),c=d.data("prevIndex"),38==i.keyCode?(p.options.liveSearch&&r--,r!=h&&r>l&&(r=l),r<s&&(r=s),r==c&&(r=a)):40==i.keyCode&&(p.options.liveSearch&&r++,r==-1&&(r=0),r!=h&&r<o&&(r=o),r>a&&(r=a),r==c&&(r=s)),d.data("prevIndex",r),p.options.liveSearch?(i.preventDefault(),d.hasClass("dropdown-toggle")||(n.removeClass("active").eq(r).addClass("active").children("a").focus(),d.focus())):n.eq(r).children("a").focus();else if(!d.is("input")){var m,y,b=[];n.each(function(){e(this).hasClass("disabled")||e.trim(e(this).children("a").text().toLowerCase()).substring(0,1)==v[i.keyCode]&&b.push(e(this).index())}),m=e(document).data("keycount"),m++,e(document).data("keycount",m),y=e.trim(e(":focus").text().toLowerCase()).substring(0,1),y!=v[i.keyCode]?(m=1,e(document).data("keycount",m)):m>=b.length&&(e(document).data("keycount",0),m>b.length&&(m=1)),n.eq(b[m-1]).children("a").focus()}if((/(13|32)/.test(i.keyCode.toString(10))||/(^9$)/.test(i.keyCode.toString(10))&&p.options.selectOnTab)&&u){if(/(32)/.test(i.keyCode.toString(10))||i.preventDefault(),p.options.liveSearch)/(32)/.test(i.keyCode.toString(10))||(p.$menuInner.find(".active a").click(),d.focus());else{var _=e(":focus");_.click(),_.focus(),i.preventDefault(),e(document).data("spaceSelect",!0)}e(document).data("keycount",0)}(/(^9$|27)/.test(i.keyCode.toString(10))&&u&&(p.multiple||p.options.liveSearch)||/(27)/.test(i.keyCode.toString(10))&&!u)&&(p.$menu.parent().removeClass("open"),p.options.container&&p.$newElement.removeClass("open"),p.$button.focus())}},mobile:function(){this.$element.addClass("mobile-device")},refresh:function(){this.$lis=null,this.liObj={},this.reloadLi(),this.render(),this.checkDisabled(),this.liHeight(!0),this.setStyle(),this.setWidth(),this.$lis&&this.$searchbox.trigger("propertychange"),this.$element.trigger("refreshed.bs.select")},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove(),this.$bsContainer?this.$bsContainer.remove():this.$menu.remove(),this.$element.off(".bs.select").removeData("selectpicker").removeClass("bs-select-hidden selectpicker")}};var u=e.fn.selectpicker;e.fn.selectpicker=i,e.fn.selectpicker.Constructor=c,e.fn.selectpicker.noConflict=function(){return e.fn.selectpicker=u,this},e(document).data("keycount",0).on("keydown.bs.select",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="listbox"], .bs-searchbox input',c.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="listbox"], .bs-searchbox input',function(e){e.stopPropagation()}),e(window).on("load.bs.select.data-api",function(){e(".selectpicker").each(function(){var t=e(this);i.call(t,t.data())})})}(e)})},function(e,t){},,function(e,t,i){(function(e){!function(e,t,i,n){"use strict";var r="treeview",o={};o.settings={injectStyle:!0,levels:2,expandIcon:"glyphicon glyphicon-plus",collapseIcon:"glyphicon glyphicon-minus",emptyIcon:"glyphicon",nodeIcon:"",selectedIcon:"",checkedIcon:"glyphicon glyphicon-check",uncheckedIcon:"glyphicon glyphicon-unchecked",color:n,backColor:n,borderColor:n,onhoverColor:"#F5F5F5",selectedColor:"#FFFFFF",selectedBackColor:"#428bca",searchResultColor:"#D9534F",searchResultBackColor:n,enableLinks:!1,highlightSelected:!0,highlightSearchResults:!0,showBorder:!0,showIcon:!0,showCheckbox:!1,showTags:!1,multiSelect:!1,onNodeChecked:n,onNodeCollapsed:n,onNodeDisabled:n,onNodeEnabled:n,onNodeExpanded:n,onNodeSelected:n,onNodeUnchecked:n,onNodeUnselected:n,onSearchComplete:n,onSearchCleared:n},o.options={silent:!1,ignoreChildren:!1},o.searchOptions={ignoreCase:!0,exactMatch:!1,revealResults:!0};var s=function(t,i){return this.$element=e(t),this.elementId=t.id,this.styleId=this.elementId+"-style",this.init(i),{options:this.options,init:e.proxy(this.init,this),remove:e.proxy(this.remove,this),getNode:e.proxy(this.getNode,this),getParent:e.proxy(this.getParent,this),getSiblings:e.proxy(this.getSiblings,this),getSelected:e.proxy(this.getSelected,this),getUnselected:e.proxy(this.getUnselected,this),getExpanded:e.proxy(this.getExpanded,this),getCollapsed:e.proxy(this.getCollapsed,this),getChecked:e.proxy(this.getChecked,this),getUnchecked:e.proxy(this.getUnchecked,this),getDisabled:e.proxy(this.getDisabled,this),getEnabled:e.proxy(this.getEnabled,this),selectNode:e.proxy(this.selectNode,this),unselectNode:e.proxy(this.unselectNode,this),toggleNodeSelected:e.proxy(this.toggleNodeSelected,this),collapseAll:e.proxy(this.collapseAll,this),collapseNode:e.proxy(this.collapseNode,this),expandAll:e.proxy(this.expandAll,this),expandNode:e.proxy(this.expandNode,this),toggleNodeExpanded:e.proxy(this.toggleNodeExpanded,this),revealNode:e.proxy(this.revealNode,this),checkAll:e.proxy(this.checkAll,this),checkNode:e.proxy(this.checkNode,this),uncheckAll:e.proxy(this.uncheckAll,this),uncheckNode:e.proxy(this.uncheckNode,this),toggleNodeChecked:e.proxy(this.toggleNodeChecked,this),disableAll:e.proxy(this.disableAll,this),disableNode:e.proxy(this.disableNode,this),enableAll:e.proxy(this.enableAll,this),enableNode:e.proxy(this.enableNode,this),toggleNodeDisabled:e.proxy(this.toggleNodeDisabled,this),search:e.proxy(this.search,this),clearSearch:e.proxy(this.clearSearch,this)}};s.prototype.init=function(t){this.tree=[],this.nodes=[],t.data&&("string"==typeof t.data&&(t.data=e.parseJSON(t.data)),this.tree=e.extend(!0,[],t.data),delete t.data),this.options=e.extend({},o.settings,t),this.destroy(),this.subscribeEvents(),this.setInitialStates({nodes:this.tree},0),this.render()},s.prototype.remove=function(){this.destroy(),e.removeData(this,r),e("#"+this.styleId).remove()},s.prototype.destroy=function(){this.initialized&&(this.$wrapper.remove(),this.$wrapper=null,this.unsubscribeEvents(),this.initialized=!1)},s.prototype.unsubscribeEvents=function(){this.$element.off("click"),this.$element.off("nodeChecked"),this.$element.off("nodeCollapsed"),this.$element.off("nodeDisabled"),this.$element.off("nodeEnabled"),this.$element.off("nodeExpanded"),this.$element.off("nodeSelected"),this.$element.off("nodeUnchecked"),this.$element.off("nodeUnselected"),this.$element.off("searchComplete"),this.$element.off("searchCleared")},s.prototype.subscribeEvents=function(){this.unsubscribeEvents(),this.$element.on("click",e.proxy(this.clickHandler,this)),"function"==typeof this.options.onNodeChecked&&this.$element.on("nodeChecked",this.options.onNodeChecked),"function"==typeof this.options.onNodeCollapsed&&this.$element.on("nodeCollapsed",this.options.onNodeCollapsed),"function"==typeof this.options.onNodeDisabled&&this.$element.on("nodeDisabled",this.options.onNodeDisabled),"function"==typeof this.options.onNodeEnabled&&this.$element.on("nodeEnabled",this.options.onNodeEnabled),"function"==typeof this.options.onNodeExpanded&&this.$element.on("nodeExpanded",this.options.onNodeExpanded),"function"==typeof this.options.onNodeSelected&&this.$element.on("nodeSelected",this.options.onNodeSelected),"function"==typeof this.options.onNodeUnchecked&&this.$element.on("nodeUnchecked",this.options.onNodeUnchecked),"function"==typeof this.options.onNodeUnselected&&this.$element.on("nodeUnselected",this.options.onNodeUnselected),"function"==typeof this.options.onSearchComplete&&this.$element.on("searchComplete",this.options.onSearchComplete),"function"==typeof this.options.onSearchCleared&&this.$element.on("searchCleared",this.options.onSearchCleared)},s.prototype.setInitialStates=function(t,i){if(t.nodes){i+=1;var n=t,r=this;e.each(t.nodes,function(e,t){t.nodeId=r.nodes.length,t.parentId=n.nodeId,t.hasOwnProperty("selectable")||(t.selectable=!0),t.state=t.state||{},t.state.hasOwnProperty("checked")||(t.state.checked=!1),t.state.hasOwnProperty("disabled")||(t.state.disabled=!1),t.state.hasOwnProperty("expanded")||(!t.state.disabled&&i<r.options.levels&&t.nodes&&t.nodes.length>0?t.state.expanded=!0:t.state.expanded=!1),t.state.hasOwnProperty("selected")||(t.state.selected=!1),r.nodes.push(t),t.nodes&&r.setInitialStates(t,i)})}},s.prototype.clickHandler=function(t){this.options.enableLinks||t.preventDefault();var i=e(t.target),n=this.findNode(i);if(n&&!n.state.disabled){var r=i.attr("class")?i.attr("class").split(" "):[];-1!==r.indexOf("expand-icon")?(this.toggleExpandedState(n,o.options),this.render()):-1!==r.indexOf("check-icon")?(this.toggleCheckedState(n,o.options),this.render()):(n.selectable?this.toggleSelectedState(n,o.options):this.toggleExpandedState(n,o.options),this.render())}},s.prototype.findNode=function(e){var t=e.closest("li.list-group-item").attr("data-nodeid"),i=this.nodes[t];return i||console.log("Error: node does not exist"),i},s.prototype.toggleExpandedState=function(e,t){e&&this.setExpandedState(e,!e.state.expanded,t)},s.prototype.setExpandedState=function(t,i,n){i!==t.state.expanded&&(i&&t.nodes?(t.state.expanded=!0,n.silent||this.$element.trigger("nodeExpanded",e.extend(!0,{},t))):i||(t.state.expanded=!1,n.silent||this.$element.trigger("nodeCollapsed",e.extend(!0,{},t)),t.nodes&&!n.ignoreChildren&&e.each(t.nodes,e.proxy(function(e,t){this.setExpandedState(t,!1,n)},this))))},s.prototype.toggleSelectedState=function(e,t){e&&this.setSelectedState(e,!e.state.selected,t)},s.prototype.setSelectedState=function(t,i,n){i!==t.state.selected&&(i?(this.options.multiSelect||e.each(this.findNodes("true","g","state.selected"),e.proxy(function(e,t){this.setSelectedState(t,!1,n)},this)),t.state.selected=!0,n.silent||this.$element.trigger("nodeSelected",e.extend(!0,{},t))):(t.state.selected=!1,n.silent||this.$element.trigger("nodeUnselected",e.extend(!0,{},t))))},s.prototype.toggleCheckedState=function(e,t){e&&this.setCheckedState(e,!e.state.checked,t)},s.prototype.setCheckedState=function(t,i,n){i!==t.state.checked&&(i?(t.state.checked=!0,n.silent||this.$element.trigger("nodeChecked",e.extend(!0,{},t))):(t.state.checked=!1,n.silent||this.$element.trigger("nodeUnchecked",e.extend(!0,{},t))))},s.prototype.setDisabledState=function(t,i,n){i!==t.state.disabled&&(i?(t.state.disabled=!0,this.setExpandedState(t,!1,n),this.setSelectedState(t,!1,n),this.setCheckedState(t,!1,n),n.silent||this.$element.trigger("nodeDisabled",e.extend(!0,{},t))):(t.state.disabled=!1,n.silent||this.$element.trigger("nodeEnabled",e.extend(!0,{},t))))},s.prototype.render=function(){this.initialized||(this.$element.addClass(r),this.$wrapper=e(this.template.list),this.injectStyle(),this.initialized=!0),this.$element.empty().append(this.$wrapper.empty()),this.buildTree(this.tree,0)},s.prototype.buildTree=function(t,i){if(t){i+=1;var n=this;e.each(t,function(t,r){for(var o=e(n.template.item).addClass("node-"+n.elementId).addClass(r.state.checked?"node-checked":"").addClass(r.state.disabled?"node-disabled":"").addClass(r.state.selected?"node-selected":"").addClass(r.searchResult?"search-result":"").attr("data-nodeid",r.nodeId).attr("style",n.buildStyleOverride(r)),s=0;i-1>s;s++)o.append(n.template.indent);var a=[];if(r.nodes?(a.push("expand-icon"),a.push(r.state.expanded?n.options.collapseIcon:n.options.expandIcon)):a.push(n.options.emptyIcon),o.append(e(n.template.icon).addClass(a.join(" "))),n.options.showIcon){var a=["node-icon"];a.push(r.icon||n.options.nodeIcon),r.state.selected&&(a.pop(),a.push(r.selectedIcon||n.options.selectedIcon||r.icon||n.options.nodeIcon)),o.append(e(n.template.icon).addClass(a.join(" ")))}if(n.options.showCheckbox){var a=["check-icon"];a.push(r.state.checked?n.options.checkedIcon:n.options.uncheckedIcon),o.append(e(n.template.icon).addClass(a.join(" ")))}return o.append(n.options.enableLinks?e(n.template.link).attr("href",r.href).append(r.text):r.text),n.options.showTags&&r.tags&&e.each(r.tags,function(t,i){o.append(e(n.template.badge).append(i))}),n.$wrapper.append(o),r.nodes&&r.state.expanded&&!r.state.disabled?n.buildTree(r.nodes,i):void 0})}},s.prototype.buildStyleOverride=function(e){if(e.state.disabled)return"";var t=e.color,i=e.backColor;return this.options.highlightSelected&&e.state.selected&&(this.options.selectedColor&&(t=this.options.selectedColor),this.options.selectedBackColor&&(i=this.options.selectedBackColor)),this.options.highlightSearchResults&&e.searchResult&&!e.state.disabled&&(this.options.searchResultColor&&(t=this.options.searchResultColor),this.options.searchResultBackColor&&(i=this.options.searchResultBackColor)),"color:"+t+";background-color:"+i+";"},s.prototype.injectStyle=function(){this.options.injectStyle&&!i.getElementById(this.styleId)&&e('<style type="text/css" id="'+this.styleId+'"> '+this.buildStyle()+" </style>").appendTo("head")},s.prototype.buildStyle=function(){var e=".node-"+this.elementId+"{";return this.options.color&&(e+="color:"+this.options.color+";"),this.options.backColor&&(e+="background-color:"+this.options.backColor+";"),this.options.showBorder?this.options.borderColor&&(e+="border:1px solid "+this.options.borderColor+";"):e+="border:none;",e+="}",this.options.onhoverColor&&(e+=".node-"+this.elementId+":not(.node-disabled):hover{background-color:"+this.options.onhoverColor+";}"),this.css+e},s.prototype.template={list:'<ul class="list-group"></ul>',item:'<li class="list-group-item"></li>',indent:'<span class="indent"></span>',icon:'<span class="icon"></span>',link:'<a href="#" style="color:inherit;"></a>',badge:'<span class="badge"></span>'},s.prototype.css=".treeview .list-group-item{cursor:pointer}.treeview span.indent{margin-left:10px;margin-right:10px}.treeview span.icon{width:12px;margin-right:5px}.treeview .node-disabled{color:silver;cursor:not-allowed}",s.prototype.getNode=function(e){return this.nodes[e]},s.prototype.getParent=function(e){var t=this.identifyNode(e);return this.nodes[t.parentId]},s.prototype.getSiblings=function(e){var t=this.identifyNode(e),i=this.getParent(t),n=i?i.nodes:this.tree;return n.filter(function(e){return e.nodeId!==t.nodeId})},s.prototype.getSelected=function(){return this.findNodes("true","g","state.selected")},s.prototype.getUnselected=function(){return this.findNodes("false","g","state.selected")},s.prototype.getExpanded=function(){return this.findNodes("true","g","state.expanded")},s.prototype.getCollapsed=function(){return this.findNodes("false","g","state.expanded")},s.prototype.getChecked=function(){return this.findNodes("true","g","state.checked")},s.prototype.getUnchecked=function(){return this.findNodes("false","g","state.checked")},s.prototype.getDisabled=function(){return this.findNodes("true","g","state.disabled")},s.prototype.getEnabled=function(){return this.findNodes("false","g","state.disabled")},s.prototype.selectNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setSelectedState(e,!0,t)},this)),this.render()},s.prototype.unselectNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setSelectedState(e,!1,t)},this)),this.render()},s.prototype.toggleNodeSelected=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.toggleSelectedState(e,t)},this)),this.render()},s.prototype.collapseAll=function(t){var i=this.findNodes("true","g","state.expanded");this.forEachIdentifier(i,t,e.proxy(function(e,t){this.setExpandedState(e,!1,t)},this)),this.render()},s.prototype.collapseNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setExpandedState(e,!1,t)},this)),this.render()},s.prototype.expandAll=function(t){if(t=e.extend({},o.options,t),t&&t.levels)this.expandLevels(this.tree,t.levels,t);else{var i=this.findNodes("false","g","state.expanded");this.forEachIdentifier(i,t,e.proxy(function(e,t){this.setExpandedState(e,!0,t)},this))}this.render()},s.prototype.expandNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setExpandedState(e,!0,t),e.nodes&&t&&t.levels&&this.expandLevels(e.nodes,t.levels-1,t)},this)),this.render()},s.prototype.expandLevels=function(t,i,n){n=e.extend({},o.options,n),e.each(t,e.proxy(function(e,t){this.setExpandedState(t,i>0,n),t.nodes&&this.expandLevels(t.nodes,i-1,n)},this))},s.prototype.revealNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){for(var i=this.getParent(e);i;)this.setExpandedState(i,!0,t),i=this.getParent(i)},this)),this.render()},s.prototype.toggleNodeExpanded=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.toggleExpandedState(e,t)},this)),this.render()},s.prototype.checkAll=function(t){var i=this.findNodes("false","g","state.checked");this.forEachIdentifier(i,t,e.proxy(function(e,t){this.setCheckedState(e,!0,t)},this)),this.render()},s.prototype.checkNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setCheckedState(e,!0,t)},this)),this.render()},s.prototype.uncheckAll=function(t){var i=this.findNodes("true","g","state.checked");
this.forEachIdentifier(i,t,e.proxy(function(e,t){this.setCheckedState(e,!1,t)},this)),this.render()},s.prototype.uncheckNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setCheckedState(e,!1,t)},this)),this.render()},s.prototype.toggleNodeChecked=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.toggleCheckedState(e,t)},this)),this.render()},s.prototype.disableAll=function(t){var i=this.findNodes("false","g","state.disabled");this.forEachIdentifier(i,t,e.proxy(function(e,t){this.setDisabledState(e,!0,t)},this)),this.render()},s.prototype.disableNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setDisabledState(e,!0,t)},this)),this.render()},s.prototype.enableAll=function(t){var i=this.findNodes("true","g","state.disabled");this.forEachIdentifier(i,t,e.proxy(function(e,t){this.setDisabledState(e,!1,t)},this)),this.render()},s.prototype.enableNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setDisabledState(e,!1,t)},this)),this.render()},s.prototype.toggleNodeDisabled=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setDisabledState(e,!e.state.disabled,t)},this)),this.render()},s.prototype.forEachIdentifier=function(t,i,n){i=e.extend({},o.options,i),t instanceof Array||(t=[t]),e.each(t,e.proxy(function(e,t){n(this.identifyNode(t),i)},this))},s.prototype.identifyNode=function(e){return"number"==typeof e?this.nodes[e]:e},s.prototype.search=function(t,i){i=e.extend({},o.searchOptions,i),this.clearSearch({render:!1});var n=[];if(t&&t.length>0){i.exactMatch&&(t="^"+t+"$");var r="g";i.ignoreCase&&(r+="i"),n=this.findNodes(t,r),e.each(n,function(e,t){t.searchResult=!0})}return i.revealResults?this.revealNode(n):this.render(),this.$element.trigger("searchComplete",e.extend(!0,{},n)),n},s.prototype.clearSearch=function(t){t=e.extend({},{render:!0},t);var i=e.each(this.findNodes("true","g","searchResult"),function(e,t){t.searchResult=!1});t.render&&this.render(),this.$element.trigger("searchCleared",e.extend(!0,{},i))},s.prototype.findNodes=function(t,i,n){i=i||"g",n=n||"text";var r=this;return e.grep(this.nodes,function(e){var o=r.getNodeValue(e,n);return"string"==typeof o?o.match(new RegExp(t,i)):void 0})},s.prototype.getNodeValue=function(e,t){var i=t.indexOf(".");if(i>0){var r=e[t.substring(0,i)],o=t.substring(i+1,t.length);return this.getNodeValue(r,o)}return e.hasOwnProperty(t)?e[t].toString():n};var a=function(e){t.console&&t.console.error(e)};e.fn[r]=function(t,i){var n;return this.each(function(){var o=e.data(this,r);"string"==typeof t?o?e.isFunction(o[t])&&"_"!==t.charAt(0)?(i instanceof Array||(i=[i]),n=o[t].apply(o,i)):a("No such method : "+t):a("Not initialized, can not call method : "+t):"boolean"==typeof t?n=o:e.data(this,r,new s(this,e.extend(!0,{},t)))}),n||this}}(e,window,document)}).call(t,i(2))}])});
//# sourceMappingURL=./public/js/dressdiscover.min.js.map